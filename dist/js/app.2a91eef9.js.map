{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?0cb1","webpack:///./src/components/HelloWorld.vue?e31b","webpack:///src/components/HelloWorld.vue","webpack:///./src/components/HelloWorld.vue?4efa","webpack:///./src/components/HelloWorld.vue","webpack:///./src/libs/connect.js","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?24bc","webpack:///./src/libs/adapter.js","webpack:///./src/scss/index.scss?7625"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Appvue_type_template_id_5b48455e_render","_vm","this","_h","$createElement","_c","_self","attrs","id","staticClass","class","active","hasJoinRoom","directives","rawName","expression","type","placeholder","domProps","on","input","$event","target","composing","roomId","click","join","_v","ref","src","autoplay","muted","snapshoot","alt","staticRenderFns","HelloWorldvue_type_template_id_148ccbb0_render","HelloWorldvue_type_template_id_148ccbb0_staticRenderFns","HelloWorldvue_type_script_lang_js_","props","msg","String","components_HelloWorldvue_type_script_lang_js_","component","componentNormalizer","options","__file","HelloWorld","socket","lib","connect_RTCConnectionHandler","RTCConnectionHandler","stream","classCallCheck","peerConn","RTCPeerConnection","sendChannel","createDataChannel","Date","addStream","initEvent","conn","_this","onicecandidate","event","candidate","label","sdpMLineIndex","sdpMid","sendMsgToConnectServer","onaddstream","e","console","log","onAddStream","ondatachannel","initChannelEvent","channel","_this2","onopen","onmessage","onMessage","onclose","createOffer","then","offer","_this3","setLocalDescription","localDescription","setRemoteDescription","RTCSessionDescription","createAnswer","answer","_this4","emit","addIceCandidate","send","room","connect_stream","handler","concat","_ref","asyncToGenerator","regeneratorRuntime","mark","_callee4","wrap","_context4","prev","next","sent","stop","_x2","arguments","_ref2","_callee5","_context5","getOffer","_x3","_ref3","_callee6","_context6","getAnswer","_x4","RTCIceCandidate","setTimeout","error","connect","Appvue_type_script_lang_js_","components","sendTxt","mounted","$refs","remoteVideo","srcObject","destroyed","methods","sendMsg","_join","_callee","elm","elm2","canvas","ctx","_context","alert","abrupt","navigator","mediaDevices","getUserMedia","audio","video","catch","localVideo","joinRoom","width","height","getContext","setInterval","width1","videoHeight","left1","videoWidth","width2","left2","drawImage","photoElm","toDataURL","draw","src_Appvue_type_script_lang_js_","App_component","App","vue_runtime_esm","config","productionTip","render","h","$mount","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_1_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_1_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","f","_Users_zj_db0818_Documents_personal_webrtc_chat_node_modules_babel_runtime_helpers_builtin_es6_typeof__WEBPACK_IMPORTED_MODULE_13__","define","g","global","self","adapter","u","a","require","Error","code","1","SDPUtils","fixStatsType","stat","inboundrtp","outboundrtp","candidatepair","localcandidate","remotecandidate","writeMediaSection","transceiver","caps","dtlsRole","sdp","writeRtpDescription","kind","writeIceParameters","iceGatherer","getLocalParameters","writeDtlsParameters","dtlsTransport","mid","rtpSender","rtpReceiver","trackId","_initialTrackId","track","msid","sendEncodingParameters","ssrc","rtx","localCName","filterIceServers","iceServers","edgeVersion","hasTurn","JSON","parse","stringify","filter","server","urls","url","warn","isString","validTurn","indexOf","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","codecs","headerExtensions","fecMechanisms","findCodecByPayloadType","pt","parseInt","payloadType","preferredPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","parameters","apt","rCodec","toLowerCase","forEach","clockRate","numChannels","Math","min","rtcpFeedback","fb","parameter","lHeaderExtension","rHeaderExtension","uri","isActionAllowedInSignalingState","action","signalingState","maybeAddCandidate","iceTransport","alreadyAdded","getRemoteCandidates","find","remoteCandidate","foundation","ip","port","priority","protocol","addRemoteCandidate","makeError","description","NotSupportedError","InvalidStateError","InvalidAccessError","TypeError","undefined","OperationError","addTrackToStreamAndFireEvent","addTrack","dispatchEvent","MediaStreamTrackEvent","removeTrackFromStreamAndFireEvent","removeTrack","fireAddTrack","pc","receiver","streams","trackEvent","Event","_dispatchEvent","_eventTarget","document","createDocumentFragment","method","canTrickleIceCandidates","needNegotiation","localStreams","remoteStreams","_localDescription","_remoteDescription","iceConnectionState","connectionState","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","iceTransportPolicy","_iceGatherers","iceCandidatePoolSize","RTCIceGatherer","gatherPolicy","_config","transceivers","_sdpSessionId","generateSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","configurable","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","_emitGatheringStateChange","getConfiguration","getLocalStreams","getRemoteStreams","_createTransceiver","doNotAdd","hasBundleTransport","recvEncodingParameters","associatedRemoteMediaStreams","wantReceive","transports","_createIceAndDtlsTransports","alreadyExists","_maybeFireNegotiationNeeded","RTCRtpSender","getTracks","clonedStream","clone","idx","clonedTrack","addEventListener","enabled","sender","map","removeStream","getSenders","getReceivers","_createIceGatherer","writable","bufferedCandidateEvents","bufferCandidates","end","keys","state","_gather","onlocalcandidate","removeEventListener","evt","cand","ufrag","usernameFragment","serializedCandidate","writeCandidate","assign","parseCandidate","toJSON","sections","getMediaSections","getDescription","complete","every","RTCIceTransport","onicestatechange","_updateIceConnectionState","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","onerror","_disposeIceAndDtlsTransports","_transceive","recv","params","encodings","rtcp","cname","compound","rtcpParameters","receive","sessionpart","Promise","reject","splitSections","mediaSection","parseRtpParameters","isIceLite","matchPrefix","rejected","isRejected","remoteIceParameters","getIceParameters","remoteDtlsParameters","getDtlsParameters","role","start","_updateSignalingState","resolve","receiverList","iceOptions","substr","split","lines","splitLines","getKind","direction","getDirection","remoteMsid","parseMsid","getMid","generateIdentifier","parseRtpEncodingParameters","parseRtcpParameters","isComplete","cands","setTransport","setRemoteCandidates","MediaStream","default","RTCRtpReceiver","getCapabilities","codec","isNewTrack","nativeTrack","sid","item","close","newState","states","new","closed","checking","connected","completed","disconnected","failed","connecting","numAudioTracks","numVideoTracks","offerOptions","mandatory","optional","offerToReceiveAudio","offerToReceiveVideo","writeSessionBoilerplate","remoteCodec","hdrExt","remoteExtensions","rHdrExt","getLocalCandidates","desc","mediaSectionsInOffer","localTrack","getAudioTracks","getVideoTracks","hasRtx","reducedSize","candidateString","trim","getStats","selector","MediaStreamTrack","senderOrReceiver","promises","all","allStats","results","Map","stats","set","ortcObjects","ortcObjectName","obj","nativeGetstats","nativeStats","mapStats","nativeMethod","args","2","random","toString","blob","line","parts","part","index","prefix","substring","relatedAddress","relatedPort","tcpType","toUpperCase","parseIceOptions","parseRtpMap","parsed","channels","writeRtpMap","parseExtmap","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","param","parseRtcpFb","writeRtcpFb","parseSsrcMedia","sp","colon","attribute","parseFingerprint","algorithm","fingerprints","setupType","fp","iceParameters","password","mline","rtpmapline","fmtps","maxptime","extension","secondarySsrc","encodingParameters","hasRed","hasUlpfec","ssrcs","primarySsrc","flows","encParam","codecPayloadType","fec","mechanism","bandwidth","maxBitrate","remoteSsrc","rsize","mux","spec","planB","sessId","sessVer","sessionId","version","parseMLine","fmt","parseOLine","username","sessionVersion","netType","addressType","address","3","adapterFactory","./adapter_factory.js","4","utils","dependencies","opts","shimChrome","shimFirefox","shimEdge","shimSafari","logging","browserDetails","detectBrowser","chromeShim","edgeShim","firefoxShim","safariShim","commonShim","extractVersion","disableLog","disableWarnings","browser","shimPeerConnection","browserShim","shimCreateObjectURL","shimGetUserMedia","shimMediaStream","shimSourceObject","shimOnTrack","shimAddTrackRemoveTrack","shimGetSendersWithDtmf","shimSenderReceiverGetStats","fixNegotiationNeeded","shimRTCIceCandidate","shimMaxMessageSize","shimSendThrowTypeError","shimRemoveStream","shimSenderGetStats","shimReceiverGetStats","shimRTCDataChannel","shimReplaceTrack","shimRTCIceServerUrls","shimCallbacksAPI","shimLocalStreamsAPI","shimRemoteStreamsAPI","shimTrackEventTransceiver","shimCreateOfferLegacy","./chrome/chrome_shim","./common_shim","./edge/edge_shim","./firefox/firefox_shim","./safari/safari_shim","./utils","5","walkStats","base","resultSet","has","endsWith","filterStats","outbound","streamStatsType","filteredResult","trackStats","trackIdentifier","trackStat","webkitMediaStream","wrapPeerConnectionEvent","_ontrack","origSetRemoteDescription","_ontrackpoly","te","shimSenderWithDtmf","dtmf","_dtmf","createDTMFSender","_pc","_senders","origAddTrack","origRemoveTrack","origAddStream","origRemoveStream","origGetSenders","senders","origGetReceivers","receivers","srcElement","origGetStats","err","DOMException","URL","HTMLMediaElement","_srcObject","revokeObjectURL","createObjectURL","shimAddTrackRemoveTrackWithNative","_shimmedLocalStreams","streamId","existingSenders","newSenders","newSender","origGetLocalStreams","nativeStreams","_reverseStreams","_streams","newStream","replaceInternalStreamId","internalId","externalStream","internalStream","replace","RegExp","replaceExternalStreamId","oldStream","isLegacyCall","origSetLocalDescription","origLocalDescription","getOwnPropertyDescriptor","isLocal","streamid","hasTrack","webkitRTCPeerConnection","pcConfig","pcConstraints","iceTransports","generateCertificate","OrigPeerConnection","newIceServers","deprecated","successCallback","errorCallback","fixChromeStats_","response","standardReport","reports","report","standardStats","timestamp","names","makeMapStats","successCallbackWrapper_","promise","nativeAddIceCandidate","shimGetDisplayMedia","getSourceId","getDisplayMedia","constraints","sourceId","chromeMediaSource","chromeMediaSourceId","maxFrameRate","frameRate","../utils.js","./getusermedia","6","constraintsToChrome_","cc","ideal","exact","max","oldname_","charAt","oc","mix","advanced","shimConstraints_","func","remap","b","face","facingMode","matches","getSupportedFacingModeLies","getSupportedConstraints","enumerateDevices","devices","dev","some","match","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","getUserMedia_","onSuccess","onError","webkitGetUserMedia","getUserMediaPromise_","kinds","getSources","device","groupId","echoCancellation","origGetUserMedia","cs","7","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","augmentedCandidate","nativeCreateObjectURL","nativeRevokeObjectURL","newId","delete","dsc","nativeSetAttribute","setAttribute","RTCSctpTransport","_sctp","sctpInDescription","mLine","getRemoteFirefoxVersion","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","maxMessageSize","isFirefox","canSendMMS","remoteMMS","Number","POSITIVE_INFINITY","sctp","origCreateDataChannel","dataChannel","wrapDcSend","dc","origDataChannelSend","size","byteLength","readyState","8","shimRTCPeerConnection","origMSTEnabled","ev","RTCDtmfSender","RTCDTMFSender","RTCPeerConnectionShim","replaceTrack","setTrack","../utils","./filtericeservers","rtcpeerconnection-shim","9","10","11","RTCTrackEvent","mozSrcObject","mozRTCPeerConnection","newServer","credential","mozRTCSessionDescription","mozRTCIceCandidate","modernStatsTypes","nativeGetStats","onSucc","onErr","DataChannel","RTCDataChannel","preferredMediaSource","mediaSource","12","InternalError","SecurityError","The operation is insecure.","constraintsToFF37_","mozGetUserMedia","infos","orgEnumerateDevices","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","13","_localStreams","getStreamById","_remoteStreams","_addTrack","tracks","_onaddstream","_onaddstreampoly","failureCallback","withCallback","cb","errcb","RTCTransceiver","origCreateOffer","audioTransceiver","getTransceivers","setDirection","addTransceiver","videoTransceiver","14","logDisabled_","deprecationWarnings_","uastring","expr","pos","eventNameToWrap","wrapper","proto","nativeAddEventListener","nativeEventName","wrappedCallback","modifiedEvent","_eventMap","nativeRemoveEventListener","unwrappedCb","bool","oldMethod","newMethod","userAgent","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_index_scss_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_index_scss_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/app.2a91eef9.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"container_join\",class:{active: _vm.hasJoinRoom}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.roomId),expression:\"roomId\"}],staticClass:\"join_input\",attrs:{\"type\":\"text\",\"placeholder\":\"pleace enter room id\"},domProps:{\"value\":(_vm.roomId)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.roomId=$event.target.value}}}),_c('button',{staticClass:\"join_btn\",on:{\"click\":_vm.join}},[_vm._v(\"join\")])]),_c('video',{ref:\"localVideo\",staticClass:\"video\",attrs:{\"src\":\"http://mvvideo10.meitudata.com/5b9b55fbd0b109355.mp4?k=a313cc9ada63509d947950b8b9923889&t=5ba5fd9c\",\"autoplay\":\"\",\"muted\":\"\"},domProps:{\"muted\":true}}),_c('video',{ref:\"remoteVideo\",staticClass:\"video\",attrs:{\"src\":\"http://mvvideo11.meitudata.com/5ba0faf2ebf987134_H264_4_3e69134ed42c62.mp4?k=95a86fd008f992ac86b41785b7f70ca3&t=5ba5fd9c\",\"autoplay\":\"\",\"muted\":\"\"},domProps:{\"muted\":true}}),_c('canvas',{ref:\"canvas\",staticClass:\"canvas\"}),_c('button',{staticClass:\"btn-photo\",on:{\"click\":_vm.snapshoot}},[_vm._v(\"合照\")]),_c('img',{ref:\"snapshoot\",attrs:{\"src\":\"\",\"alt\":\"\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hello\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"hello\">\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'HelloWorld',\n  props: {\n    msg: String\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HelloWorld.vue?vue&type=template&id=148ccbb0&\"\nimport script from \"./HelloWorld.vue?vue&type=script&lang=js&\"\nexport * from \"./HelloWorld.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"HelloWorld.vue\"\nexport default component.exports","import './adapter';\nimport * as io from 'socket.io-client';\n\n// let socket = io.connect('http://localhost:10000');\n// let socket = io.connect('https://qqq.meipai.com:10001');\n\n// let socket = io.connect('https://localhost:10001');\nlet socket = io.connect();\n\nclass RTCConnectionHandler {\n    constructor(stream) {\n        let peerConn = this.peerConn = new RTCPeerConnection();\n        let sendChannel = this.sendChannel = peerConn.createDataChannel(+new Date());\n        if (stream) {\n            peerConn.addStream(stream);\n        }\n        this.initEvent(peerConn);\n    }\n\n    initEvent(conn) {\n        conn.onicecandidate = event => {\n            if (event.candidate) {\n                let msg = {\n                    type: 'candidate',\n                    label: event.candidate.sdpMLineIndex,\n                    id: event.candidate.sdpMid,\n                    candidate: event.candidate.candidate,\n                };\n                this.sendMsgToConnectServer(msg);\n\n            }\n        };\n        conn.onaddstream = e => {\n            console.log(e);\n            if (typeof this.onAddStream === 'function') {\n                this.onAddStream(e.stream);\n            }\n        };\n        conn.ondatachannel = e => {\n            this.initChannelEvent(e.channel);\n        };\n    }\n\n    initChannelEvent(channel) {\n        channel.onopen = (e) => {\n            console.log('open');\n            console.log(e);\n        };\n        channel.onmessage = (msg) => {\n            if (typeof this.onMessage === 'function') {\n                this.onMessage(msg);\n            }\n        };\n        channel.onclose = e => {\n            console.log(e);\n        };\n    }\n\n    async createOffer() {\n        console.log('createoffer');\n        return await this.peerConn.createOffer().then(offer => {\n            this.peerConn.setLocalDescription(offer);\n            return this.peerConn.localDescription;\n        });\n    }\n\n    async getOffer(offer) {\n        console.log('getoffer');\n        return await this.peerConn.setRemoteDescription(new RTCSessionDescription(offer));\n    }\n\n    async createAnswer() {\n        console.log('createranswer');\n        return await this.peerConn.createAnswer().then(answer => {\n            this.peerConn.setLocalDescription(new RTCSessionDescription(answer));\n            return this.peerConn.localDescription;\n        });\n    }\n\n    getAnswer(answer) {\n        console.log('getanswer');\n        return this.peerConn.setRemoteDescription(new RTCSessionDescription(answer));\n    }\n\n    sendMsgToConnectServer(msg) {\n        socket.emit('message', msg);\n    }\n\n    addIceCandidate(candidate) {\n        this.peerConn.addIceCandidate(candidate);\n    }\n\n    sendMsg(msg) {\n        this.sendChannel.send(msg);\n    }\n\n    joinRoom(room, stream) {\n        console.log(room);\n        console.log(stream);\n        if (stream) {\n            console.log(1);\n            this.peerConn.addStream(stream);\n            socket.emit('createOrJoin', room);\n            console.log(2);\n        }\n    }\n}\n\nlet stream = false;\nlet handler = new RTCConnectionHandler(stream);\nsocket.on('create', (room) => {\n    console.log(`create ${room}`);\n});\nconsole.log(socket);\nsocket.on('guestJoin', async (e) => {\n    console.log('join');\n    let offer = await handler.createOffer();\n    socket.emit('getOffer', offer);\n});\nsocket.on('getOffer', async (offer) => {\n    await handler.getOffer(offer);\n    let answer = await handler.createAnswer();\n    socket.emit('getAnswer', answer);\n});\nsocket.on('getAnswer', async (answer) => {\n    await handler.getAnswer(answer);\n    console.log(handler);\n});\n\nsocket.on('message', (msg) => {\n    console.log('onmessage');\n    console.log(msg);\n    if (msg.type = 'candidate') {\n        handler.addIceCandidate(new RTCIceCandidate({candidate: msg.candidate}));\n    }\n});\n\nsetTimeout(() => {\n    console.error(handler);\n}, 3000);\n\nexport default handler;","<template>\n  <div id=\"app\">\n    <div class=\"container_join\" :class=\"{active: hasJoinRoom}\">\n      <input type=\"text\" placeholder=\"pleace enter room id\" v-model=\"roomId\" class=\"join_input\">\n      <button @click=\"join\" class=\"join_btn\">join</button>\n    </div>\n      <!--<input type=\"text\" v-model=\"sendTxt\">-->\n      <!--<button @click=\"send\">send</button>-->\n    <video src=\"http://mvvideo10.meitudata.com/5b9b55fbd0b109355.mp4?k=a313cc9ada63509d947950b8b9923889&t=5ba5fd9c\"\n           ref=\"localVideo\" class=\"video\" autoplay muted></video>\n    <video src=\"http://mvvideo11.meitudata.com/5ba0faf2ebf987134_H264_4_3e69134ed42c62.mp4?k=95a86fd008f992ac86b41785b7f70ca3&t=5ba5fd9c\"\n           ref=\"remoteVideo\" class=\"video\" autoplay muted></video>\n    <canvas ref=\"canvas\" class=\"canvas\"></canvas>\n    <button class=\"btn-photo\" @click=\"snapshoot\">合照</button>\n    <img src=\"\" alt=\"\" ref=\"snapshoot\">\n  </div>\n</template>\n\n<script>\nimport HelloWorld from './components/HelloWorld.vue';\nimport handler from './libs/connect';\n\nexport default {\n    name: 'app',\n    components: {\n        HelloWorld,\n    },\n    data() {\n        return {\n            sendTxt: '',\n            roomId: '',\n            hasJoinRoom: true,\n        };\n    },\n    mounted() {\n        handler.onMessage = (e) => {\n            console.log(e);\n        };\n        handler.onAddStream = (stream) => {\n            this.$refs.remoteVideo.srcObject = stream;\n        };\n    },\n    destroyed() {\n\n    },\n    methods: {\n        send() {\n            console.log(this.sendTxt);\n            handler.sendMsg(this.sendTxt);\n        },\n        async join() {\n            if (this.roomId === 0) {\n                alert('please enter room id');\n                return;\n            }\n            let stream = await navigator.mediaDevices.getUserMedia({\n                audio: false,\n                video: true,\n            }).catch(e => {\n                console.error(e);\n            });\n            this.hasJoinRoom = true;\n            let elm = this.$refs.localVideo;\n            let elm2 = this.$refs.remoteVideo;\n\n            elm.srcObject = stream;\n\n            handler.joinRoom(this.roomId, stream);\n\n            let canvas = this.$refs.canvas;\n            canvas.width = 400;\n            canvas.height = 300;\n            let ctx = canvas.getContext('2d');\n            setInterval(() => {\n                let width1 = canvas.width / canvas.height * elm.videoHeight / 2;\n                let left1 = (elm.videoWidth - width1) / 2;\n\n                let width2 = canvas.width / canvas.height * elm2.videoHeight / 2;\n                let left2 = (elm2.videoWidth - width2) / 2;\n\n                // left\n                ctx.drawImage(elm, left1, 0, width1, elm.videoHeight, 0, 0, canvas.width / 2, canvas.height);\n                // right\n                ctx.drawImage(elm2, left2, 0, width2, elm2.videoHeight, canvas.width / 2, 0, canvas.width / 2, canvas.height);\n            }, 30);\n        },\n        snapshoot() {\n            let photoElm = this.$refs.snapshoot;\n            let canvas = this.$refs.canvas;\n            photoElm.src = canvas.toDataURL();\n        },\n        draw() {\n        },\n    },\n};\n</script>\n<style lang=\"scss\" src=\"./scss/index.scss\"></style>\n<style lang=\"scss\">\n  .video {\n      width: 1px;\n      height: 1px;\n      opacity: 0;\n  }\n\n  .container_join {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      background-color: #aaaaaa;\n      overflow: auto;\n      transition: all .3s;\n      &.active {\n          transform: translateY(-100vh);\n      }\n      .join_input {\n          display: block;\n          width: 80vw;\n          margin: 30vh auto 0;\n          border-radius: 5px;\n          border: none;\n          box-shadow: 10px 10px 10px #666;\n          padding: 10px;\n      }\n      .join_btn {\n          background-color: green;\n          display: block;\n          margin: 5vh auto 0;\n          width: 80vw;\n          height: 30px;\n          line-height: 1;\n          border-radius: 5px;\n          color: #fff;\n          box-shadow: 10px 10px 10px #666;\n      }\n  }\n\n  .canvas {\n      width: 80vw;\n      height: 60vw;\n      display: block;\n      margin: auto;\n      background-color: #000000;\n  }\n\n  .btn-photo {\n      display: block;\n      background-color: #000000;\n      color: #fff;\n      padding: 10px;\n      margin: 10vh auto;\n      border-radius: 10px;\n      min-width: 20vw;\n  }\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=5b48455e&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./scss/index.scss?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./App.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App)\n}).$mount('#app')\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=1&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=1&lang=scss&\"","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.adapter = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n        /*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n        var SDPUtils = require('sdp');\n\n        function fixStatsType(stat) {\n            return {\n                inboundrtp: 'inbound-rtp',\n                outboundrtp: 'outbound-rtp',\n                candidatepair: 'candidate-pair',\n                localcandidate: 'local-candidate',\n                remotecandidate: 'remote-candidate'\n            }[stat.type] || stat.type;\n        }\n\n        function writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n            var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n            // Map ICE parameters (ufrag, pwd) to SDP.\n            sdp += SDPUtils.writeIceParameters(\n                transceiver.iceGatherer.getLocalParameters());\n\n            // Map DTLS parameters to SDP.\n            sdp += SDPUtils.writeDtlsParameters(\n                transceiver.dtlsTransport.getLocalParameters(),\n                type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n            sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n            if (transceiver.rtpSender && transceiver.rtpReceiver) {\n                sdp += 'a=sendrecv\\r\\n';\n            } else if (transceiver.rtpSender) {\n                sdp += 'a=sendonly\\r\\n';\n            } else if (transceiver.rtpReceiver) {\n                sdp += 'a=recvonly\\r\\n';\n            } else {\n                sdp += 'a=inactive\\r\\n';\n            }\n\n            if (transceiver.rtpSender) {\n                var trackId = transceiver.rtpSender._initialTrackId ||\n                    transceiver.rtpSender.track.id;\n                transceiver.rtpSender._initialTrackId = trackId;\n                // spec.\n                var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n                    trackId + '\\r\\n';\n                sdp += 'a=' + msid;\n                // for Chrome. Legacy should no longer be required.\n                sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n                    ' ' + msid;\n\n                // RTX\n                if (transceiver.sendEncodingParameters[0].rtx) {\n                    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n                        ' ' + msid;\n                    sdp += 'a=ssrc-group:FID ' +\n                        transceiver.sendEncodingParameters[0].ssrc + ' ' +\n                        transceiver.sendEncodingParameters[0].rtx.ssrc +\n                        '\\r\\n';\n                }\n            }\n            // FIXME: this should be written by writeRtpDescription.\n            sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n                ' cname:' + SDPUtils.localCName + '\\r\\n';\n            if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n                sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n                    ' cname:' + SDPUtils.localCName + '\\r\\n';\n            }\n            return sdp;\n        }\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\n        function filterIceServers(iceServers, edgeVersion) {\n            var hasTurn = false;\n            iceServers = JSON.parse(JSON.stringify(iceServers));\n            return iceServers.filter(function(server) {\n                if (server && (server.urls || server.url)) {\n                    var urls = server.urls || server.url;\n                    if (server.url && !server.urls) {\n                        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n                    }\n                    var isString = typeof urls === 'string';\n                    if (isString) {\n                        urls = [urls];\n                    }\n                    urls = urls.filter(function(url) {\n                        var validTurn = url.indexOf('turn:') === 0 &&\n                            url.indexOf('transport=udp') !== -1 &&\n                            url.indexOf('turn:[') === -1 &&\n                            !hasTurn;\n\n                        if (validTurn) {\n                            hasTurn = true;\n                            return true;\n                        }\n                        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n                            url.indexOf('?transport=udp') === -1;\n                    });\n\n                    delete server.url;\n                    server.urls = isString ? urls[0] : urls;\n                    return !!urls.length;\n                }\n            });\n        }\n\n// Determines the intersection of local and remote capabilities.\n        function getCommonCapabilities(localCapabilities, remoteCapabilities) {\n            var commonCapabilities = {\n                codecs: [],\n                headerExtensions: [],\n                fecMechanisms: []\n            };\n\n            var findCodecByPayloadType = function(pt, codecs) {\n                pt = parseInt(pt, 10);\n                for (var i = 0; i < codecs.length; i++) {\n                    if (codecs[i].payloadType === pt ||\n                        codecs[i].preferredPayloadType === pt) {\n                        return codecs[i];\n                    }\n                }\n            };\n\n            var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n                var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n                var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n                return lCodec && rCodec &&\n                    lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n            };\n\n            localCapabilities.codecs.forEach(function(lCodec) {\n                for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n                    var rCodec = remoteCapabilities.codecs[i];\n                    if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n                        lCodec.clockRate === rCodec.clockRate) {\n                        if (lCodec.name.toLowerCase() === 'rtx' &&\n                            lCodec.parameters && rCodec.parameters.apt) {\n                            // for RTX we need to find the local rtx that has a apt\n                            // which points to the same local codec as the remote one.\n                            if (!rtxCapabilityMatches(lCodec, rCodec,\n                                    localCapabilities.codecs, remoteCapabilities.codecs)) {\n                                continue;\n                            }\n                        }\n                        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n                        // number of channels is the highest common number of channels\n                        rCodec.numChannels = Math.min(lCodec.numChannels,\n                            rCodec.numChannels);\n                        // push rCodec so we reply with offerer payload type\n                        commonCapabilities.codecs.push(rCodec);\n\n                        // determine common feedback mechanisms\n                        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n                            for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n                                if (lCodec.rtcpFeedback[j].type === fb.type &&\n                                    lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n                                    return true;\n                                }\n                            }\n                            return false;\n                        });\n                        // FIXME: also need to determine .parameters\n                        //  see https://github.com/openpeer/ortc/issues/569\n                        break;\n                    }\n                }\n            });\n\n            localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n                for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n                     i++) {\n                    var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n                    if (lHeaderExtension.uri === rHeaderExtension.uri) {\n                        commonCapabilities.headerExtensions.push(rHeaderExtension);\n                        break;\n                    }\n                }\n            });\n\n            // FIXME: fecMechanisms\n            return commonCapabilities;\n        }\n\n// is action=setLocalDescription with type allowed in signalingState\n        function isActionAllowedInSignalingState(action, type, signalingState) {\n            return {\n                offer: {\n                    setLocalDescription: ['stable', 'have-local-offer'],\n                    setRemoteDescription: ['stable', 'have-remote-offer']\n                },\n                answer: {\n                    setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n                    setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n                }\n            }[type][action].indexOf(signalingState) !== -1;\n        }\n\n        function maybeAddCandidate(iceTransport, candidate) {\n            // Edge's internal representation adds some fields therefore\n            // not all fieldѕ are taken into account.\n            var alreadyAdded = iceTransport.getRemoteCandidates()\n                .find(function(remoteCandidate) {\n                    return candidate.foundation === remoteCandidate.foundation &&\n                        candidate.ip === remoteCandidate.ip &&\n                        candidate.port === remoteCandidate.port &&\n                        candidate.priority === remoteCandidate.priority &&\n                        candidate.protocol === remoteCandidate.protocol &&\n                        candidate.type === remoteCandidate.type;\n                });\n            if (!alreadyAdded) {\n                iceTransport.addRemoteCandidate(candidate);\n            }\n            return !alreadyAdded;\n        }\n\n\n        function makeError(name, description) {\n            var e = new Error(description);\n            e.name = name;\n            // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n            e.code = {\n                NotSupportedError: 9,\n                InvalidStateError: 11,\n                InvalidAccessError: 15,\n                TypeError: undefined,\n                OperationError: undefined\n            }[name];\n            return e;\n        }\n\n        module.exports = function(window, edgeVersion) {\n            // https://w3c.github.io/mediacapture-main/#mediastream\n            // Helper function to add the track to the stream and\n            // dispatch the event ourselves.\n            function addTrackToStreamAndFireEvent(track, stream) {\n                stream.addTrack(track);\n                stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n                    {track: track}));\n            }\n\n            function removeTrackFromStreamAndFireEvent(track, stream) {\n                stream.removeTrack(track);\n                stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n                    {track: track}));\n            }\n\n            function fireAddTrack(pc, track, receiver, streams) {\n                var trackEvent = new Event('track');\n                trackEvent.track = track;\n                trackEvent.receiver = receiver;\n                trackEvent.transceiver = {receiver: receiver};\n                trackEvent.streams = streams;\n                window.setTimeout(function() {\n                    pc._dispatchEvent('track', trackEvent);\n                });\n            }\n\n            var RTCPeerConnection = function(config) {\n                var pc = this;\n\n                var _eventTarget = document.createDocumentFragment();\n                ['addEventListener', 'removeEventListener', 'dispatchEvent']\n                    .forEach(function(method) {\n                        pc[method] = _eventTarget[method].bind(_eventTarget);\n                    });\n\n                this.canTrickleIceCandidates = null;\n\n                this.needNegotiation = false;\n\n                this.localStreams = [];\n                this.remoteStreams = [];\n\n                this._localDescription = null;\n                this._remoteDescription = null;\n\n                this.signalingState = 'stable';\n                this.iceConnectionState = 'new';\n                this.connectionState = 'new';\n                this.iceGatheringState = 'new';\n\n                config = JSON.parse(JSON.stringify(config || {}));\n\n                this.usingBundle = config.bundlePolicy === 'max-bundle';\n                if (config.rtcpMuxPolicy === 'negotiate') {\n                    throw(makeError('NotSupportedError',\n                        'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n                } else if (!config.rtcpMuxPolicy) {\n                    config.rtcpMuxPolicy = 'require';\n                }\n\n                switch (config.iceTransportPolicy) {\n                    case 'all':\n                    case 'relay':\n                        break;\n                    default:\n                        config.iceTransportPolicy = 'all';\n                        break;\n                }\n\n                switch (config.bundlePolicy) {\n                    case 'balanced':\n                    case 'max-compat':\n                    case 'max-bundle':\n                        break;\n                    default:\n                        config.bundlePolicy = 'balanced';\n                        break;\n                }\n\n                config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n                this._iceGatherers = [];\n                if (config.iceCandidatePoolSize) {\n                    for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n                        this._iceGatherers.push(new window.RTCIceGatherer({\n                            iceServers: config.iceServers,\n                            gatherPolicy: config.iceTransportPolicy\n                        }));\n                    }\n                } else {\n                    config.iceCandidatePoolSize = 0;\n                }\n\n                this._config = config;\n\n                // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n                // everything that is needed to describe a SDP m-line.\n                this.transceivers = [];\n\n                this._sdpSessionId = SDPUtils.generateSessionId();\n                this._sdpSessionVersion = 0;\n\n                this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n                this._isClosed = false;\n            };\n\n            Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\n                configurable: true,\n                get: function() {\n                    return this._localDescription;\n                }\n            });\n            Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\n                configurable: true,\n                get: function() {\n                    return this._remoteDescription;\n                }\n            });\n\n            // set up event handlers on prototype\n            RTCPeerConnection.prototype.onicecandidate = null;\n            RTCPeerConnection.prototype.onaddstream = null;\n            RTCPeerConnection.prototype.ontrack = null;\n            RTCPeerConnection.prototype.onremovestream = null;\n            RTCPeerConnection.prototype.onsignalingstatechange = null;\n            RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n            RTCPeerConnection.prototype.onconnectionstatechange = null;\n            RTCPeerConnection.prototype.onicegatheringstatechange = null;\n            RTCPeerConnection.prototype.onnegotiationneeded = null;\n            RTCPeerConnection.prototype.ondatachannel = null;\n\n            RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n                if (this._isClosed) {\n                    return;\n                }\n                this.dispatchEvent(event);\n                if (typeof this['on' + name] === 'function') {\n                    this['on' + name](event);\n                }\n            };\n\n            RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n                var event = new Event('icegatheringstatechange');\n                this._dispatchEvent('icegatheringstatechange', event);\n            };\n\n            RTCPeerConnection.prototype.getConfiguration = function() {\n                return this._config;\n            };\n\n            RTCPeerConnection.prototype.getLocalStreams = function() {\n                return this.localStreams;\n            };\n\n            RTCPeerConnection.prototype.getRemoteStreams = function() {\n                return this.remoteStreams;\n            };\n\n            // internal helper to create a transceiver object.\n            // (which is not yet the same as the WebRTC 1.0 transceiver)\n            RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n                var hasBundleTransport = this.transceivers.length > 0;\n                var transceiver = {\n                    track: null,\n                    iceGatherer: null,\n                    iceTransport: null,\n                    dtlsTransport: null,\n                    localCapabilities: null,\n                    remoteCapabilities: null,\n                    rtpSender: null,\n                    rtpReceiver: null,\n                    kind: kind,\n                    mid: null,\n                    sendEncodingParameters: null,\n                    recvEncodingParameters: null,\n                    stream: null,\n                    associatedRemoteMediaStreams: [],\n                    wantReceive: true\n                };\n                if (this.usingBundle && hasBundleTransport) {\n                    transceiver.iceTransport = this.transceivers[0].iceTransport;\n                    transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n                } else {\n                    var transports = this._createIceAndDtlsTransports();\n                    transceiver.iceTransport = transports.iceTransport;\n                    transceiver.dtlsTransport = transports.dtlsTransport;\n                }\n                if (!doNotAdd) {\n                    this.transceivers.push(transceiver);\n                }\n                return transceiver;\n            };\n\n            RTCPeerConnection.prototype.addTrack = function(track, stream) {\n                if (this._isClosed) {\n                    throw makeError('InvalidStateError',\n                        'Attempted to call addTrack on a closed peerconnection.');\n                }\n\n                var alreadyExists = this.transceivers.find(function(s) {\n                    return s.track === track;\n                });\n\n                if (alreadyExists) {\n                    throw makeError('InvalidAccessError', 'Track already exists.');\n                }\n\n                var transceiver;\n                for (var i = 0; i < this.transceivers.length; i++) {\n                    if (!this.transceivers[i].track &&\n                        this.transceivers[i].kind === track.kind) {\n                        transceiver = this.transceivers[i];\n                    }\n                }\n                if (!transceiver) {\n                    transceiver = this._createTransceiver(track.kind);\n                }\n\n                this._maybeFireNegotiationNeeded();\n\n                if (this.localStreams.indexOf(stream) === -1) {\n                    this.localStreams.push(stream);\n                }\n\n                transceiver.track = track;\n                transceiver.stream = stream;\n                transceiver.rtpSender = new window.RTCRtpSender(track,\n                    transceiver.dtlsTransport);\n                return transceiver.rtpSender;\n            };\n\n            RTCPeerConnection.prototype.addStream = function(stream) {\n                var pc = this;\n                if (edgeVersion >= 15025) {\n                    stream.getTracks().forEach(function(track) {\n                        pc.addTrack(track, stream);\n                    });\n                } else {\n                    // Clone is necessary for local demos mostly, attaching directly\n                    // to two different senders does not work (build 10547).\n                    // Fixed in 15025 (or earlier)\n                    var clonedStream = stream.clone();\n                    stream.getTracks().forEach(function(track, idx) {\n                        var clonedTrack = clonedStream.getTracks()[idx];\n                        track.addEventListener('enabled', function(event) {\n                            clonedTrack.enabled = event.enabled;\n                        });\n                    });\n                    clonedStream.getTracks().forEach(function(track) {\n                        pc.addTrack(track, clonedStream);\n                    });\n                }\n            };\n\n            RTCPeerConnection.prototype.removeTrack = function(sender) {\n                if (this._isClosed) {\n                    throw makeError('InvalidStateError',\n                        'Attempted to call removeTrack on a closed peerconnection.');\n                }\n\n                if (!(sender instanceof window.RTCRtpSender)) {\n                    throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n                        'does not implement interface RTCRtpSender.');\n                }\n\n                var transceiver = this.transceivers.find(function(t) {\n                    return t.rtpSender === sender;\n                });\n\n                if (!transceiver) {\n                    throw makeError('InvalidAccessError',\n                        'Sender was not created by this connection.');\n                }\n                var stream = transceiver.stream;\n\n                transceiver.rtpSender.stop();\n                transceiver.rtpSender = null;\n                transceiver.track = null;\n                transceiver.stream = null;\n\n                // remove the stream from the set of local streams\n                var localStreams = this.transceivers.map(function(t) {\n                    return t.stream;\n                });\n                if (localStreams.indexOf(stream) === -1 &&\n                    this.localStreams.indexOf(stream) > -1) {\n                    this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n                }\n\n                this._maybeFireNegotiationNeeded();\n            };\n\n            RTCPeerConnection.prototype.removeStream = function(stream) {\n                var pc = this;\n                stream.getTracks().forEach(function(track) {\n                    var sender = pc.getSenders().find(function(s) {\n                        return s.track === track;\n                    });\n                    if (sender) {\n                        pc.removeTrack(sender);\n                    }\n                });\n            };\n\n            RTCPeerConnection.prototype.getSenders = function() {\n                return this.transceivers.filter(function(transceiver) {\n                    return !!transceiver.rtpSender;\n                })\n                    .map(function(transceiver) {\n                        return transceiver.rtpSender;\n                    });\n            };\n\n            RTCPeerConnection.prototype.getReceivers = function() {\n                return this.transceivers.filter(function(transceiver) {\n                    return !!transceiver.rtpReceiver;\n                })\n                    .map(function(transceiver) {\n                        return transceiver.rtpReceiver;\n                    });\n            };\n\n\n            RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n                                                                      usingBundle) {\n                var pc = this;\n                if (usingBundle && sdpMLineIndex > 0) {\n                    return this.transceivers[0].iceGatherer;\n                } else if (this._iceGatherers.length) {\n                    return this._iceGatherers.shift();\n                }\n                var iceGatherer = new window.RTCIceGatherer({\n                    iceServers: this._config.iceServers,\n                    gatherPolicy: this._config.iceTransportPolicy\n                });\n                Object.defineProperty(iceGatherer, 'state',\n                    {value: 'new', writable: true}\n                );\n\n                this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n                this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n                    var end = !event.candidate || Object.keys(event.candidate).length === 0;\n                    // polyfill since RTCIceGatherer.state is not implemented in\n                    // Edge 10547 yet.\n                    iceGatherer.state = end ? 'completed' : 'gathering';\n                    if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n                        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n                    }\n                };\n                iceGatherer.addEventListener('localcandidate',\n                    this.transceivers[sdpMLineIndex].bufferCandidates);\n                return iceGatherer;\n            };\n\n            // start gathering from an RTCIceGatherer.\n            RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n                var pc = this;\n                var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n                if (iceGatherer.onlocalcandidate) {\n                    return;\n                }\n                var bufferedCandidateEvents =\n                    this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n                this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n                iceGatherer.removeEventListener('localcandidate',\n                    this.transceivers[sdpMLineIndex].bufferCandidates);\n                iceGatherer.onlocalcandidate = function(evt) {\n                    if (pc.usingBundle && sdpMLineIndex > 0) {\n                        // if we know that we use bundle we can drop candidates with\n                        // ѕdpMLineIndex > 0. If we don't do this then our state gets\n                        // confused since we dispose the extra ice gatherer.\n                        return;\n                    }\n                    var event = new Event('icecandidate');\n                    event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n                    var cand = evt.candidate;\n                    // Edge emits an empty object for RTCIceCandidateComplete‥\n                    var end = !cand || Object.keys(cand).length === 0;\n                    if (end) {\n                        // polyfill since RTCIceGatherer.state is not implemented in\n                        // Edge 10547 yet.\n                        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n                            iceGatherer.state = 'completed';\n                        }\n                    } else {\n                        if (iceGatherer.state === 'new') {\n                            iceGatherer.state = 'gathering';\n                        }\n                        // RTCIceCandidate doesn't have a component, needs to be added\n                        cand.component = 1;\n                        // also the usernameFragment. TODO: update SDP to take both variants.\n                        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n                        var serializedCandidate = SDPUtils.writeCandidate(cand);\n                        event.candidate = Object.assign(event.candidate,\n                            SDPUtils.parseCandidate(serializedCandidate));\n\n                        event.candidate.candidate = serializedCandidate;\n                        event.candidate.toJSON = function() {\n                            return {\n                                candidate: event.candidate.candidate,\n                                sdpMid: event.candidate.sdpMid,\n                                sdpMLineIndex: event.candidate.sdpMLineIndex,\n                                usernameFragment: event.candidate.usernameFragment\n                            };\n                        };\n                    }\n\n                    // update local description.\n                    var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\n                    if (!end) {\n                        sections[event.candidate.sdpMLineIndex] +=\n                            'a=' + event.candidate.candidate + '\\r\\n';\n                    } else {\n                        sections[event.candidate.sdpMLineIndex] +=\n                            'a=end-of-candidates\\r\\n';\n                    }\n                    pc._localDescription.sdp =\n                        SDPUtils.getDescription(pc._localDescription.sdp) +\n                        sections.join('');\n                    var complete = pc.transceivers.every(function(transceiver) {\n                        return transceiver.iceGatherer &&\n                            transceiver.iceGatherer.state === 'completed';\n                    });\n\n                    if (pc.iceGatheringState !== 'gathering') {\n                        pc.iceGatheringState = 'gathering';\n                        pc._emitGatheringStateChange();\n                    }\n\n                    // Emit candidate. Also emit null candidate when all gatherers are\n                    // complete.\n                    if (!end) {\n                        pc._dispatchEvent('icecandidate', event);\n                    }\n                    if (complete) {\n                        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n                        pc.iceGatheringState = 'complete';\n                        pc._emitGatheringStateChange();\n                    }\n                };\n\n                // emit already gathered candidates.\n                window.setTimeout(function() {\n                    bufferedCandidateEvents.forEach(function(e) {\n                        iceGatherer.onlocalcandidate(e);\n                    });\n                }, 0);\n            };\n\n            // Create ICE transport and DTLS transport.\n            RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n                var pc = this;\n                var iceTransport = new window.RTCIceTransport(null);\n                iceTransport.onicestatechange = function() {\n                    pc._updateIceConnectionState();\n                    pc._updateConnectionState();\n                };\n\n                var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n                dtlsTransport.ondtlsstatechange = function() {\n                    pc._updateConnectionState();\n                };\n                dtlsTransport.onerror = function() {\n                    // onerror does not set state to failed by itself.\n                    Object.defineProperty(dtlsTransport, 'state',\n                        {value: 'failed', writable: true});\n                    pc._updateConnectionState();\n                };\n\n                return {\n                    iceTransport: iceTransport,\n                    dtlsTransport: dtlsTransport\n                };\n            };\n\n            // Destroy ICE gatherer, ICE transport and DTLS transport.\n            // Without triggering the callbacks.\n            RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n                sdpMLineIndex) {\n                var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n                if (iceGatherer) {\n                    delete iceGatherer.onlocalcandidate;\n                    delete this.transceivers[sdpMLineIndex].iceGatherer;\n                }\n                var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n                if (iceTransport) {\n                    delete iceTransport.onicestatechange;\n                    delete this.transceivers[sdpMLineIndex].iceTransport;\n                }\n                var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n                if (dtlsTransport) {\n                    delete dtlsTransport.ondtlsstatechange;\n                    delete dtlsTransport.onerror;\n                    delete this.transceivers[sdpMLineIndex].dtlsTransport;\n                }\n            };\n\n            // Start the RTP Sender and Receiver for a transceiver.\n            RTCPeerConnection.prototype._transceive = function(transceiver,\n                                                               send, recv) {\n                var params = getCommonCapabilities(transceiver.localCapabilities,\n                    transceiver.remoteCapabilities);\n                if (send && transceiver.rtpSender) {\n                    params.encodings = transceiver.sendEncodingParameters;\n                    params.rtcp = {\n                        cname: SDPUtils.localCName,\n                        compound: transceiver.rtcpParameters.compound\n                    };\n                    if (transceiver.recvEncodingParameters.length) {\n                        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n                    }\n                    transceiver.rtpSender.send(params);\n                }\n                if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n                    // remove RTX field in Edge 14942\n                    if (transceiver.kind === 'video'\n                        && transceiver.recvEncodingParameters\n                        && edgeVersion < 15019) {\n                        transceiver.recvEncodingParameters.forEach(function(p) {\n                            delete p.rtx;\n                        });\n                    }\n                    if (transceiver.recvEncodingParameters.length) {\n                        params.encodings = transceiver.recvEncodingParameters;\n                    } else {\n                        params.encodings = [{}];\n                    }\n                    params.rtcp = {\n                        compound: transceiver.rtcpParameters.compound\n                    };\n                    if (transceiver.rtcpParameters.cname) {\n                        params.rtcp.cname = transceiver.rtcpParameters.cname;\n                    }\n                    if (transceiver.sendEncodingParameters.length) {\n                        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n                    }\n                    transceiver.rtpReceiver.receive(params);\n                }\n            };\n\n            RTCPeerConnection.prototype.setLocalDescription = function(description) {\n                var pc = this;\n\n                // Note: pranswer is not supported.\n                if (['offer', 'answer'].indexOf(description.type) === -1) {\n                    return Promise.reject(makeError('TypeError',\n                        'Unsupported type \"' + description.type + '\"'));\n                }\n\n                if (!isActionAllowedInSignalingState('setLocalDescription',\n                        description.type, pc.signalingState) || pc._isClosed) {\n                    return Promise.reject(makeError('InvalidStateError',\n                        'Can not set local ' + description.type +\n                        ' in state ' + pc.signalingState));\n                }\n\n                var sections;\n                var sessionpart;\n                if (description.type === 'offer') {\n                    // VERY limited support for SDP munging. Limited to:\n                    // * changing the order of codecs\n                    sections = SDPUtils.splitSections(description.sdp);\n                    sessionpart = sections.shift();\n                    sections.forEach(function(mediaSection, sdpMLineIndex) {\n                        var caps = SDPUtils.parseRtpParameters(mediaSection);\n                        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n                    });\n\n                    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n                        pc._gather(transceiver.mid, sdpMLineIndex);\n                    });\n                } else if (description.type === 'answer') {\n                    sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n                    sessionpart = sections.shift();\n                    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n                        'a=ice-lite').length > 0;\n                    sections.forEach(function(mediaSection, sdpMLineIndex) {\n                        var transceiver = pc.transceivers[sdpMLineIndex];\n                        var iceGatherer = transceiver.iceGatherer;\n                        var iceTransport = transceiver.iceTransport;\n                        var dtlsTransport = transceiver.dtlsTransport;\n                        var localCapabilities = transceiver.localCapabilities;\n                        var remoteCapabilities = transceiver.remoteCapabilities;\n\n                        // treat bundle-only as not-rejected.\n                        var rejected = SDPUtils.isRejected(mediaSection) &&\n                            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n                        if (!rejected && !transceiver.rejected) {\n                            var remoteIceParameters = SDPUtils.getIceParameters(\n                                mediaSection, sessionpart);\n                            var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n                                mediaSection, sessionpart);\n                            if (isIceLite) {\n                                remoteDtlsParameters.role = 'server';\n                            }\n\n                            if (!pc.usingBundle || sdpMLineIndex === 0) {\n                                pc._gather(transceiver.mid, sdpMLineIndex);\n                                if (iceTransport.state === 'new') {\n                                    iceTransport.start(iceGatherer, remoteIceParameters,\n                                        isIceLite ? 'controlling' : 'controlled');\n                                }\n                                if (dtlsTransport.state === 'new') {\n                                    dtlsTransport.start(remoteDtlsParameters);\n                                }\n                            }\n\n                            // Calculate intersection of capabilities.\n                            var params = getCommonCapabilities(localCapabilities,\n                                remoteCapabilities);\n\n                            // Start the RTCRtpSender. The RTCRtpReceiver for this\n                            // transceiver has already been started in setRemoteDescription.\n                            pc._transceive(transceiver,\n                                params.codecs.length > 0,\n                                false);\n                        }\n                    });\n                }\n\n                pc._localDescription = {\n                    type: description.type,\n                    sdp: description.sdp\n                };\n                if (description.type === 'offer') {\n                    pc._updateSignalingState('have-local-offer');\n                } else {\n                    pc._updateSignalingState('stable');\n                }\n\n                return Promise.resolve();\n            };\n\n            RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n                var pc = this;\n\n                // Note: pranswer is not supported.\n                if (['offer', 'answer'].indexOf(description.type) === -1) {\n                    return Promise.reject(makeError('TypeError',\n                        'Unsupported type \"' + description.type + '\"'));\n                }\n\n                if (!isActionAllowedInSignalingState('setRemoteDescription',\n                        description.type, pc.signalingState) || pc._isClosed) {\n                    return Promise.reject(makeError('InvalidStateError',\n                        'Can not set remote ' + description.type +\n                        ' in state ' + pc.signalingState));\n                }\n\n                var streams = {};\n                pc.remoteStreams.forEach(function(stream) {\n                    streams[stream.id] = stream;\n                });\n                var receiverList = [];\n                var sections = SDPUtils.splitSections(description.sdp);\n                var sessionpart = sections.shift();\n                var isIceLite = SDPUtils.matchPrefix(sessionpart,\n                    'a=ice-lite').length > 0;\n                var usingBundle = SDPUtils.matchPrefix(sessionpart,\n                    'a=group:BUNDLE ').length > 0;\n                pc.usingBundle = usingBundle;\n                var iceOptions = SDPUtils.matchPrefix(sessionpart,\n                    'a=ice-options:')[0];\n                if (iceOptions) {\n                    pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n                        .indexOf('trickle') >= 0;\n                } else {\n                    pc.canTrickleIceCandidates = false;\n                }\n\n                sections.forEach(function(mediaSection, sdpMLineIndex) {\n                    var lines = SDPUtils.splitLines(mediaSection);\n                    var kind = SDPUtils.getKind(mediaSection);\n                    // treat bundle-only as not-rejected.\n                    var rejected = SDPUtils.isRejected(mediaSection) &&\n                        SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n                    var protocol = lines[0].substr(2).split(' ')[2];\n\n                    var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n                    var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n                    var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n                    // Reject datachannels which are not implemented yet.\n                    if (rejected || (kind === 'application' && (protocol === 'DTLS/SCTP' ||\n                            protocol === 'UDP/DTLS/SCTP'))) {\n                        // TODO: this is dangerous in the case where a non-rejected m-line\n                        //     becomes rejected.\n                        pc.transceivers[sdpMLineIndex] = {\n                            mid: mid,\n                            kind: kind,\n                            protocol: protocol,\n                            rejected: true\n                        };\n                        return;\n                    }\n\n                    if (!rejected && pc.transceivers[sdpMLineIndex] &&\n                        pc.transceivers[sdpMLineIndex].rejected) {\n                        // recycle a rejected transceiver.\n                        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n                    }\n\n                    var transceiver;\n                    var iceGatherer;\n                    var iceTransport;\n                    var dtlsTransport;\n                    var rtpReceiver;\n                    var sendEncodingParameters;\n                    var recvEncodingParameters;\n                    var localCapabilities;\n\n                    var track;\n                    // FIXME: ensure the mediaSection has rtcp-mux set.\n                    var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n                    var remoteIceParameters;\n                    var remoteDtlsParameters;\n                    if (!rejected) {\n                        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n                            sessionpart);\n                        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n                            sessionpart);\n                        remoteDtlsParameters.role = 'client';\n                    }\n                    recvEncodingParameters =\n                        SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n                    var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n                    var isComplete = SDPUtils.matchPrefix(mediaSection,\n                        'a=end-of-candidates', sessionpart).length > 0;\n                    var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n                        .map(function(cand) {\n                            return SDPUtils.parseCandidate(cand);\n                        })\n                        .filter(function(cand) {\n                            return cand.component === 1;\n                        });\n\n                    // Check if we can use BUNDLE and dispose transports.\n                    if ((description.type === 'offer' || description.type === 'answer') &&\n                        !rejected && usingBundle && sdpMLineIndex > 0 &&\n                        pc.transceivers[sdpMLineIndex]) {\n                        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n                        pc.transceivers[sdpMLineIndex].iceGatherer =\n                            pc.transceivers[0].iceGatherer;\n                        pc.transceivers[sdpMLineIndex].iceTransport =\n                            pc.transceivers[0].iceTransport;\n                        pc.transceivers[sdpMLineIndex].dtlsTransport =\n                            pc.transceivers[0].dtlsTransport;\n                        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n                            pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n                                pc.transceivers[0].dtlsTransport);\n                        }\n                        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n                            pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n                                pc.transceivers[0].dtlsTransport);\n                        }\n                    }\n                    if (description.type === 'offer' && !rejected) {\n                        transceiver = pc.transceivers[sdpMLineIndex] ||\n                            pc._createTransceiver(kind);\n                        transceiver.mid = mid;\n\n                        if (!transceiver.iceGatherer) {\n                            transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n                                usingBundle);\n                        }\n\n                        if (cands.length && transceiver.iceTransport.state === 'new') {\n                            if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n                                transceiver.iceTransport.setRemoteCandidates(cands);\n                            } else {\n                                cands.forEach(function(candidate) {\n                                    maybeAddCandidate(transceiver.iceTransport, candidate);\n                                });\n                            }\n                        }\n\n                        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n                        // filter RTX until additional stuff needed for RTX is implemented\n                        // in adapter.js\n                        if (edgeVersion < 15019) {\n                            localCapabilities.codecs = localCapabilities.codecs.filter(\n                                function(codec) {\n                                    return codec.name !== 'rtx';\n                                });\n                        }\n\n                        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n                            ssrc: (2 * sdpMLineIndex + 2) * 1001\n                        }];\n\n                        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n                        var isNewTrack = false;\n                        if (direction === 'sendrecv' || direction === 'sendonly') {\n                            isNewTrack = !transceiver.rtpReceiver;\n                            rtpReceiver = transceiver.rtpReceiver ||\n                                new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n                            if (isNewTrack) {\n                                var stream;\n                                track = rtpReceiver.track;\n                                // FIXME: does not work with Plan B.\n                                if (remoteMsid && remoteMsid.stream === '-') {\n                                    // no-op. a stream id of '-' means: no associated stream.\n                                } else if (remoteMsid) {\n                                    if (!streams[remoteMsid.stream]) {\n                                        streams[remoteMsid.stream] = new window.MediaStream();\n                                        Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                                            get: function() {\n                                                return remoteMsid.stream;\n                                            }\n                                        });\n                                    }\n                                    Object.defineProperty(track, 'id', {\n                                        get: function() {\n                                            return remoteMsid.track;\n                                        }\n                                    });\n                                    stream = streams[remoteMsid.stream];\n                                } else {\n                                    if (!streams.default) {\n                                        streams.default = new window.MediaStream();\n                                    }\n                                    stream = streams.default;\n                                }\n                                if (stream) {\n                                    addTrackToStreamAndFireEvent(track, stream);\n                                    transceiver.associatedRemoteMediaStreams.push(stream);\n                                }\n                                receiverList.push([track, rtpReceiver, stream]);\n                            }\n                        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n                            transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n                                var nativeTrack = s.getTracks().find(function(t) {\n                                    return t.id === transceiver.rtpReceiver.track.id;\n                                });\n                                if (nativeTrack) {\n                                    removeTrackFromStreamAndFireEvent(nativeTrack, s);\n                                }\n                            });\n                            transceiver.associatedRemoteMediaStreams = [];\n                        }\n\n                        transceiver.localCapabilities = localCapabilities;\n                        transceiver.remoteCapabilities = remoteCapabilities;\n                        transceiver.rtpReceiver = rtpReceiver;\n                        transceiver.rtcpParameters = rtcpParameters;\n                        transceiver.sendEncodingParameters = sendEncodingParameters;\n                        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n                        // Start the RTCRtpReceiver now. The RTPSender is started in\n                        // setLocalDescription.\n                        pc._transceive(pc.transceivers[sdpMLineIndex],\n                            false,\n                            isNewTrack);\n                    } else if (description.type === 'answer' && !rejected) {\n                        transceiver = pc.transceivers[sdpMLineIndex];\n                        iceGatherer = transceiver.iceGatherer;\n                        iceTransport = transceiver.iceTransport;\n                        dtlsTransport = transceiver.dtlsTransport;\n                        rtpReceiver = transceiver.rtpReceiver;\n                        sendEncodingParameters = transceiver.sendEncodingParameters;\n                        localCapabilities = transceiver.localCapabilities;\n\n                        pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n                            recvEncodingParameters;\n                        pc.transceivers[sdpMLineIndex].remoteCapabilities =\n                            remoteCapabilities;\n                        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n                        if (cands.length && iceTransport.state === 'new') {\n                            if ((isIceLite || isComplete) &&\n                                (!usingBundle || sdpMLineIndex === 0)) {\n                                iceTransport.setRemoteCandidates(cands);\n                            } else {\n                                cands.forEach(function(candidate) {\n                                    maybeAddCandidate(transceiver.iceTransport, candidate);\n                                });\n                            }\n                        }\n\n                        if (!usingBundle || sdpMLineIndex === 0) {\n                            if (iceTransport.state === 'new') {\n                                iceTransport.start(iceGatherer, remoteIceParameters,\n                                    'controlling');\n                            }\n                            if (dtlsTransport.state === 'new') {\n                                dtlsTransport.start(remoteDtlsParameters);\n                            }\n                        }\n\n                        pc._transceive(transceiver,\n                            direction === 'sendrecv' || direction === 'recvonly',\n                            direction === 'sendrecv' || direction === 'sendonly');\n\n                        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n                        if (rtpReceiver &&\n                            (direction === 'sendrecv' || direction === 'sendonly')) {\n                            track = rtpReceiver.track;\n                            if (remoteMsid) {\n                                if (!streams[remoteMsid.stream]) {\n                                    streams[remoteMsid.stream] = new window.MediaStream();\n                                }\n                                addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n                                receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n                            } else {\n                                if (!streams.default) {\n                                    streams.default = new window.MediaStream();\n                                }\n                                addTrackToStreamAndFireEvent(track, streams.default);\n                                receiverList.push([track, rtpReceiver, streams.default]);\n                            }\n                        } else {\n                            // FIXME: actually the receiver should be created later.\n                            delete transceiver.rtpReceiver;\n                        }\n                    }\n                });\n\n                if (pc._dtlsRole === undefined) {\n                    pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n                }\n\n                pc._remoteDescription = {\n                    type: description.type,\n                    sdp: description.sdp\n                };\n                if (description.type === 'offer') {\n                    pc._updateSignalingState('have-remote-offer');\n                } else {\n                    pc._updateSignalingState('stable');\n                }\n                Object.keys(streams).forEach(function(sid) {\n                    var stream = streams[sid];\n                    if (stream.getTracks().length) {\n                        if (pc.remoteStreams.indexOf(stream) === -1) {\n                            pc.remoteStreams.push(stream);\n                            var event = new Event('addstream');\n                            event.stream = stream;\n                            window.setTimeout(function() {\n                                pc._dispatchEvent('addstream', event);\n                            });\n                        }\n\n                        receiverList.forEach(function(item) {\n                            var track = item[0];\n                            var receiver = item[1];\n                            if (stream.id !== item[2].id) {\n                                return;\n                            }\n                            fireAddTrack(pc, track, receiver, [stream]);\n                        });\n                    }\n                });\n                receiverList.forEach(function(item) {\n                    if (item[2]) {\n                        return;\n                    }\n                    fireAddTrack(pc, item[0], item[1], []);\n                });\n\n                // check whether addIceCandidate({}) was called within four seconds after\n                // setRemoteDescription.\n                window.setTimeout(function() {\n                    if (!(pc && pc.transceivers)) {\n                        return;\n                    }\n                    pc.transceivers.forEach(function(transceiver) {\n                        if (transceiver.iceTransport &&\n                            transceiver.iceTransport.state === 'new' &&\n                            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n                            console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n                                'an end-of-candidates notification');\n                            transceiver.iceTransport.addRemoteCandidate({});\n                        }\n                    });\n                }, 4000);\n\n                return Promise.resolve();\n            };\n\n            RTCPeerConnection.prototype.close = function() {\n                this.transceivers.forEach(function(transceiver) {\n                    /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n                    if (transceiver.iceTransport) {\n                        transceiver.iceTransport.stop();\n                    }\n                    if (transceiver.dtlsTransport) {\n                        transceiver.dtlsTransport.stop();\n                    }\n                    if (transceiver.rtpSender) {\n                        transceiver.rtpSender.stop();\n                    }\n                    if (transceiver.rtpReceiver) {\n                        transceiver.rtpReceiver.stop();\n                    }\n                });\n                // FIXME: clean up tracks, local streams, remote streams, etc\n                this._isClosed = true;\n                this._updateSignalingState('closed');\n            };\n\n            // Update the signaling state.\n            RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n                this.signalingState = newState;\n                var event = new Event('signalingstatechange');\n                this._dispatchEvent('signalingstatechange', event);\n            };\n\n            // Determine whether to fire the negotiationneeded event.\n            RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n                var pc = this;\n                if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n                    return;\n                }\n                this.needNegotiation = true;\n                window.setTimeout(function() {\n                    if (pc.needNegotiation) {\n                        pc.needNegotiation = false;\n                        var event = new Event('negotiationneeded');\n                        pc._dispatchEvent('negotiationneeded', event);\n                    }\n                }, 0);\n            };\n\n            // Update the ice connection state.\n            RTCPeerConnection.prototype._updateIceConnectionState = function() {\n                var newState;\n                var states = {\n                    'new': 0,\n                    closed: 0,\n                    checking: 0,\n                    connected: 0,\n                    completed: 0,\n                    disconnected: 0,\n                    failed: 0\n                };\n                this.transceivers.forEach(function(transceiver) {\n                    states[transceiver.iceTransport.state]++;\n                });\n\n                newState = 'new';\n                if (states.failed > 0) {\n                    newState = 'failed';\n                } else if (states.checking > 0) {\n                    newState = 'checking';\n                } else if (states.disconnected > 0) {\n                    newState = 'disconnected';\n                } else if (states.new > 0) {\n                    newState = 'new';\n                } else if (states.connected > 0) {\n                    newState = 'connected';\n                } else if (states.completed > 0) {\n                    newState = 'completed';\n                }\n\n                if (newState !== this.iceConnectionState) {\n                    this.iceConnectionState = newState;\n                    var event = new Event('iceconnectionstatechange');\n                    this._dispatchEvent('iceconnectionstatechange', event);\n                }\n            };\n\n            // Update the connection state.\n            RTCPeerConnection.prototype._updateConnectionState = function() {\n                var newState;\n                var states = {\n                    'new': 0,\n                    closed: 0,\n                    connecting: 0,\n                    connected: 0,\n                    completed: 0,\n                    disconnected: 0,\n                    failed: 0\n                };\n                this.transceivers.forEach(function(transceiver) {\n                    states[transceiver.iceTransport.state]++;\n                    states[transceiver.dtlsTransport.state]++;\n                });\n                // ICETransport.completed and connected are the same for this purpose.\n                states.connected += states.completed;\n\n                newState = 'new';\n                if (states.failed > 0) {\n                    newState = 'failed';\n                } else if (states.connecting > 0) {\n                    newState = 'connecting';\n                } else if (states.disconnected > 0) {\n                    newState = 'disconnected';\n                } else if (states.new > 0) {\n                    newState = 'new';\n                } else if (states.connected > 0) {\n                    newState = 'connected';\n                }\n\n                if (newState !== this.connectionState) {\n                    this.connectionState = newState;\n                    var event = new Event('connectionstatechange');\n                    this._dispatchEvent('connectionstatechange', event);\n                }\n            };\n\n            RTCPeerConnection.prototype.createOffer = function() {\n                var pc = this;\n\n                if (pc._isClosed) {\n                    return Promise.reject(makeError('InvalidStateError',\n                        'Can not call createOffer after close'));\n                }\n\n                var numAudioTracks = pc.transceivers.filter(function(t) {\n                    return t.kind === 'audio';\n                }).length;\n                var numVideoTracks = pc.transceivers.filter(function(t) {\n                    return t.kind === 'video';\n                }).length;\n\n                // Determine number of audio and video tracks we need to send/recv.\n                var offerOptions = arguments[0];\n                if (offerOptions) {\n                    // Reject Chrome legacy constraints.\n                    if (offerOptions.mandatory || offerOptions.optional) {\n                        throw new TypeError(\n                            'Legacy mandatory/optional constraints not supported.');\n                    }\n                    if (offerOptions.offerToReceiveAudio !== undefined) {\n                        if (offerOptions.offerToReceiveAudio === true) {\n                            numAudioTracks = 1;\n                        } else if (offerOptions.offerToReceiveAudio === false) {\n                            numAudioTracks = 0;\n                        } else {\n                            numAudioTracks = offerOptions.offerToReceiveAudio;\n                        }\n                    }\n                    if (offerOptions.offerToReceiveVideo !== undefined) {\n                        if (offerOptions.offerToReceiveVideo === true) {\n                            numVideoTracks = 1;\n                        } else if (offerOptions.offerToReceiveVideo === false) {\n                            numVideoTracks = 0;\n                        } else {\n                            numVideoTracks = offerOptions.offerToReceiveVideo;\n                        }\n                    }\n                }\n\n                pc.transceivers.forEach(function(transceiver) {\n                    if (transceiver.kind === 'audio') {\n                        numAudioTracks--;\n                        if (numAudioTracks < 0) {\n                            transceiver.wantReceive = false;\n                        }\n                    } else if (transceiver.kind === 'video') {\n                        numVideoTracks--;\n                        if (numVideoTracks < 0) {\n                            transceiver.wantReceive = false;\n                        }\n                    }\n                });\n\n                // Create M-lines for recvonly streams.\n                while (numAudioTracks > 0 || numVideoTracks > 0) {\n                    if (numAudioTracks > 0) {\n                        pc._createTransceiver('audio');\n                        numAudioTracks--;\n                    }\n                    if (numVideoTracks > 0) {\n                        pc._createTransceiver('video');\n                        numVideoTracks--;\n                    }\n                }\n\n                var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n                    pc._sdpSessionVersion++);\n                pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n                    // For each track, create an ice gatherer, ice transport,\n                    // dtls transport, potentially rtpsender and rtpreceiver.\n                    var track = transceiver.track;\n                    var kind = transceiver.kind;\n                    var mid = transceiver.mid || SDPUtils.generateIdentifier();\n                    transceiver.mid = mid;\n\n                    if (!transceiver.iceGatherer) {\n                        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n                            pc.usingBundle);\n                    }\n\n                    var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n                    // filter RTX until additional stuff needed for RTX is implemented\n                    // in adapter.js\n                    if (edgeVersion < 15019) {\n                        localCapabilities.codecs = localCapabilities.codecs.filter(\n                            function(codec) {\n                                return codec.name !== 'rtx';\n                            });\n                    }\n                    localCapabilities.codecs.forEach(function(codec) {\n                        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n                        // by adding level-asymmetry-allowed=1\n                        if (codec.name === 'H264' &&\n                            codec.parameters['level-asymmetry-allowed'] === undefined) {\n                            codec.parameters['level-asymmetry-allowed'] = '1';\n                        }\n\n                        // for subsequent offers, we might have to re-use the payload\n                        // type of the last offer.\n                        if (transceiver.remoteCapabilities &&\n                            transceiver.remoteCapabilities.codecs) {\n                            transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n                                if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                                    codec.clockRate === remoteCodec.clockRate) {\n                                    codec.preferredPayloadType = remoteCodec.payloadType;\n                                }\n                            });\n                        }\n                    });\n                    localCapabilities.headerExtensions.forEach(function(hdrExt) {\n                        var remoteExtensions = transceiver.remoteCapabilities &&\n                            transceiver.remoteCapabilities.headerExtensions || [];\n                        remoteExtensions.forEach(function(rHdrExt) {\n                            if (hdrExt.uri === rHdrExt.uri) {\n                                hdrExt.id = rHdrExt.id;\n                            }\n                        });\n                    });\n\n                    // generate an ssrc now, to be used later in rtpSender.send\n                    var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n                        ssrc: (2 * sdpMLineIndex + 1) * 1001\n                    }];\n                    if (track) {\n                        // add RTX\n                        if (edgeVersion >= 15019 && kind === 'video' &&\n                            !sendEncodingParameters[0].rtx) {\n                            sendEncodingParameters[0].rtx = {\n                                ssrc: sendEncodingParameters[0].ssrc + 1\n                            };\n                        }\n                    }\n\n                    if (transceiver.wantReceive) {\n                        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n                            transceiver.dtlsTransport, kind);\n                    }\n\n                    transceiver.localCapabilities = localCapabilities;\n                    transceiver.sendEncodingParameters = sendEncodingParameters;\n                });\n\n                // always offer BUNDLE and dispose on return if not supported.\n                if (pc._config.bundlePolicy !== 'max-compat') {\n                    sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n                        return t.mid;\n                    }).join(' ') + '\\r\\n';\n                }\n                sdp += 'a=ice-options:trickle\\r\\n';\n\n                pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n                    sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n                        'offer', transceiver.stream, pc._dtlsRole);\n                    sdp += 'a=rtcp-rsize\\r\\n';\n\n                    if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n                        (sdpMLineIndex === 0 || !pc.usingBundle)) {\n                        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n                            cand.component = 1;\n                            sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n                        });\n\n                        if (transceiver.iceGatherer.state === 'completed') {\n                            sdp += 'a=end-of-candidates\\r\\n';\n                        }\n                    }\n                });\n\n                var desc = new window.RTCSessionDescription({\n                    type: 'offer',\n                    sdp: sdp\n                });\n                return Promise.resolve(desc);\n            };\n\n            RTCPeerConnection.prototype.createAnswer = function() {\n                var pc = this;\n\n                if (pc._isClosed) {\n                    return Promise.reject(makeError('InvalidStateError',\n                        'Can not call createAnswer after close'));\n                }\n\n                if (!(pc.signalingState === 'have-remote-offer' ||\n                        pc.signalingState === 'have-local-pranswer')) {\n                    return Promise.reject(makeError('InvalidStateError',\n                        'Can not call createAnswer in signalingState ' + pc.signalingState));\n                }\n\n                var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n                    pc._sdpSessionVersion++);\n                if (pc.usingBundle) {\n                    sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n                        return t.mid;\n                    }).join(' ') + '\\r\\n';\n                }\n                var mediaSectionsInOffer = SDPUtils.getMediaSections(\n                    pc._remoteDescription.sdp).length;\n                pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n                    if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n                        return;\n                    }\n                    if (transceiver.rejected) {\n                        if (transceiver.kind === 'application') {\n                            if (transceiver.protocol === 'DTLS/SCTP') { // legacy fmt\n                                sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n                            } else {\n                                sdp += 'm=application 0 ' + transceiver.protocol +\n                                    ' webrtc-datachannel\\r\\n';\n                            }\n                        } else if (transceiver.kind === 'audio') {\n                            sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n                                'a=rtpmap:0 PCMU/8000\\r\\n';\n                        } else if (transceiver.kind === 'video') {\n                            sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n                                'a=rtpmap:120 VP8/90000\\r\\n';\n                        }\n                        sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n                            'a=inactive\\r\\n' +\n                            'a=mid:' + transceiver.mid + '\\r\\n';\n                        return;\n                    }\n\n                    // FIXME: look at direction.\n                    if (transceiver.stream) {\n                        var localTrack;\n                        if (transceiver.kind === 'audio') {\n                            localTrack = transceiver.stream.getAudioTracks()[0];\n                        } else if (transceiver.kind === 'video') {\n                            localTrack = transceiver.stream.getVideoTracks()[0];\n                        }\n                        if (localTrack) {\n                            // add RTX\n                            if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n                                !transceiver.sendEncodingParameters[0].rtx) {\n                                transceiver.sendEncodingParameters[0].rtx = {\n                                    ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n                                };\n                            }\n                        }\n                    }\n\n                    // Calculate intersection of capabilities.\n                    var commonCapabilities = getCommonCapabilities(\n                        transceiver.localCapabilities,\n                        transceiver.remoteCapabilities);\n\n                    var hasRtx = commonCapabilities.codecs.filter(function(c) {\n                        return c.name.toLowerCase() === 'rtx';\n                    }).length;\n                    if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n                        delete transceiver.sendEncodingParameters[0].rtx;\n                    }\n\n                    sdp += writeMediaSection(transceiver, commonCapabilities,\n                        'answer', transceiver.stream, pc._dtlsRole);\n                    if (transceiver.rtcpParameters &&\n                        transceiver.rtcpParameters.reducedSize) {\n                        sdp += 'a=rtcp-rsize\\r\\n';\n                    }\n                });\n\n                var desc = new window.RTCSessionDescription({\n                    type: 'answer',\n                    sdp: sdp\n                });\n                return Promise.resolve(desc);\n            };\n\n            RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n                var pc = this;\n                var sections;\n                if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n                        candidate.sdpMid)) {\n                    return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n                }\n\n                // TODO: needs to go into ops queue.\n                return new Promise(function(resolve, reject) {\n                    if (!pc._remoteDescription) {\n                        return reject(makeError('InvalidStateError',\n                            'Can not add ICE candidate without a remote description'));\n                    } else if (!candidate || candidate.candidate === '') {\n                        for (var j = 0; j < pc.transceivers.length; j++) {\n                            if (pc.transceivers[j].rejected) {\n                                continue;\n                            }\n                            pc.transceivers[j].iceTransport.addRemoteCandidate({});\n                            sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n                            sections[j] += 'a=end-of-candidates\\r\\n';\n                            pc._remoteDescription.sdp =\n                                SDPUtils.getDescription(pc._remoteDescription.sdp) +\n                                sections.join('');\n                            if (pc.usingBundle) {\n                                break;\n                            }\n                        }\n                    } else {\n                        var sdpMLineIndex = candidate.sdpMLineIndex;\n                        if (candidate.sdpMid) {\n                            for (var i = 0; i < pc.transceivers.length; i++) {\n                                if (pc.transceivers[i].mid === candidate.sdpMid) {\n                                    sdpMLineIndex = i;\n                                    break;\n                                }\n                            }\n                        }\n                        var transceiver = pc.transceivers[sdpMLineIndex];\n                        if (transceiver) {\n                            if (transceiver.rejected) {\n                                return resolve();\n                            }\n                            var cand = Object.keys(candidate.candidate).length > 0 ?\n                                SDPUtils.parseCandidate(candidate.candidate) : {};\n                            // Ignore Chrome's invalid candidates since Edge does not like them.\n                            if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n                                return resolve();\n                            }\n                            // Ignore RTCP candidates, we assume RTCP-MUX.\n                            if (cand.component && cand.component !== 1) {\n                                return resolve();\n                            }\n                            // when using bundle, avoid adding candidates to the wrong\n                            // ice transport. And avoid adding candidates added in the SDP.\n                            if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n                                    transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n                                if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n                                    return reject(makeError('OperationError',\n                                        'Can not add ICE candidate'));\n                                }\n                            }\n\n                            // update the remoteDescription.\n                            var candidateString = candidate.candidate.trim();\n                            if (candidateString.indexOf('a=') === 0) {\n                                candidateString = candidateString.substr(2);\n                            }\n                            sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n                            sections[sdpMLineIndex] += 'a=' +\n                                (cand.type ? candidateString : 'end-of-candidates')\n                                + '\\r\\n';\n                            pc._remoteDescription.sdp =\n                                SDPUtils.getDescription(pc._remoteDescription.sdp) +\n                                sections.join('');\n                        } else {\n                            return reject(makeError('OperationError',\n                                'Can not add ICE candidate'));\n                        }\n                    }\n                    resolve();\n                });\n            };\n\n            RTCPeerConnection.prototype.getStats = function(selector) {\n                if (selector && selector instanceof window.MediaStreamTrack) {\n                    var senderOrReceiver = null;\n                    this.transceivers.forEach(function(transceiver) {\n                        if (transceiver.rtpSender &&\n                            transceiver.rtpSender.track === selector) {\n                            senderOrReceiver = transceiver.rtpSender;\n                        } else if (transceiver.rtpReceiver &&\n                            transceiver.rtpReceiver.track === selector) {\n                            senderOrReceiver = transceiver.rtpReceiver;\n                        }\n                    });\n                    if (!senderOrReceiver) {\n                        throw makeError('InvalidAccessError', 'Invalid selector.');\n                    }\n                    return senderOrReceiver.getStats();\n                }\n\n                var promises = [];\n                this.transceivers.forEach(function(transceiver) {\n                    ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n                        'dtlsTransport'].forEach(function(method) {\n                        if (transceiver[method]) {\n                            promises.push(transceiver[method].getStats());\n                        }\n                    });\n                });\n                return Promise.all(promises).then(function(allStats) {\n                    var results = new Map();\n                    allStats.forEach(function(stats) {\n                        stats.forEach(function(stat) {\n                            results.set(stat.id, stat);\n                        });\n                    });\n                    return results;\n                });\n            };\n\n            // fix low-level stat names and return Map instead of object.\n            var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',\n                'RTCIceTransport', 'RTCDtlsTransport'];\n            ortcObjects.forEach(function(ortcObjectName) {\n                var obj = window[ortcObjectName];\n                if (obj && obj.prototype && obj.prototype.getStats) {\n                    var nativeGetstats = obj.prototype.getStats;\n                    obj.prototype.getStats = function() {\n                        return nativeGetstats.apply(this)\n                            .then(function(nativeStats) {\n                                var mapStats = new Map();\n                                Object.keys(nativeStats).forEach(function(id) {\n                                    nativeStats[id].type = fixStatsType(nativeStats[id]);\n                                    mapStats.set(id, nativeStats[id]);\n                                });\n                                return mapStats;\n                            });\n                    };\n                }\n            });\n\n            // legacy callback shims. Should be moved to adapter.js some days.\n            var methods = ['createOffer', 'createAnswer'];\n            methods.forEach(function(method) {\n                var nativeMethod = RTCPeerConnection.prototype[method];\n                RTCPeerConnection.prototype[method] = function() {\n                    var args = arguments;\n                    if (typeof args[0] === 'function' ||\n                        typeof args[1] === 'function') { // legacy\n                        return nativeMethod.apply(this, [arguments[2]])\n                            .then(function(description) {\n                                if (typeof args[0] === 'function') {\n                                    args[0].apply(null, [description]);\n                                }\n                            }, function(error) {\n                                if (typeof args[1] === 'function') {\n                                    args[1].apply(null, [error]);\n                                }\n                            });\n                    }\n                    return nativeMethod.apply(this, arguments);\n                };\n            });\n\n            methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n            methods.forEach(function(method) {\n                var nativeMethod = RTCPeerConnection.prototype[method];\n                RTCPeerConnection.prototype[method] = function() {\n                    var args = arguments;\n                    if (typeof args[1] === 'function' ||\n                        typeof args[2] === 'function') { // legacy\n                        return nativeMethod.apply(this, arguments)\n                            .then(function() {\n                                if (typeof args[1] === 'function') {\n                                    args[1].apply(null);\n                                }\n                            }, function(error) {\n                                if (typeof args[2] === 'function') {\n                                    args[2].apply(null, [error]);\n                                }\n                            });\n                    }\n                    return nativeMethod.apply(this, arguments);\n                };\n            });\n\n            // getStats is special. It doesn't have a spec legacy method yet we support\n            // getStats(something, cb) without error callbacks.\n            ['getStats'].forEach(function(method) {\n                var nativeMethod = RTCPeerConnection.prototype[method];\n                RTCPeerConnection.prototype[method] = function() {\n                    var args = arguments;\n                    if (typeof args[1] === 'function') {\n                        return nativeMethod.apply(this, arguments)\n                            .then(function() {\n                                if (typeof args[1] === 'function') {\n                                    args[1].apply(null);\n                                }\n                            });\n                    }\n                    return nativeMethod.apply(this, arguments);\n                };\n            });\n\n            return RTCPeerConnection;\n        };\n\n    },{\"sdp\":2}],2:[function(require,module,exports){\n        /* eslint-env node */\n        'use strict';\n\n// SDP helpers.\n        var SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\n        SDPUtils.generateIdentifier = function() {\n            return Math.random().toString(36).substr(2, 10);\n        };\n\n// The RTCP CNAME used by all peerconnections from the same JS.\n        SDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\n        SDPUtils.splitLines = function(blob) {\n            return blob.trim().split('\\n').map(function(line) {\n                return line.trim();\n            });\n        };\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\n        SDPUtils.splitSections = function(blob) {\n            var parts = blob.split('\\nm=');\n            return parts.map(function(part, index) {\n                return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n            });\n        };\n\n// returns the session description.\n        SDPUtils.getDescription = function(blob) {\n            var sections = SDPUtils.splitSections(blob);\n            return sections && sections[0];\n        };\n\n// returns the individual media sections.\n        SDPUtils.getMediaSections = function(blob) {\n            var sections = SDPUtils.splitSections(blob);\n            sections.shift();\n            return sections;\n        };\n\n// Returns lines that start with a certain prefix.\n        SDPUtils.matchPrefix = function(blob, prefix) {\n            return SDPUtils.splitLines(blob).filter(function(line) {\n                return line.indexOf(prefix) === 0;\n            });\n        };\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\n        SDPUtils.parseCandidate = function(line) {\n            var parts;\n            // Parse both variants.\n            if (line.indexOf('a=candidate:') === 0) {\n                parts = line.substring(12).split(' ');\n            } else {\n                parts = line.substring(10).split(' ');\n            }\n\n            var candidate = {\n                foundation: parts[0],\n                component: parseInt(parts[1], 10),\n                protocol: parts[2].toLowerCase(),\n                priority: parseInt(parts[3], 10),\n                ip: parts[4],\n                port: parseInt(parts[5], 10),\n                // skip parts[6] == 'typ'\n                type: parts[7]\n            };\n\n            for (var i = 8; i < parts.length; i += 2) {\n                switch (parts[i]) {\n                    case 'raddr':\n                        candidate.relatedAddress = parts[i + 1];\n                        break;\n                    case 'rport':\n                        candidate.relatedPort = parseInt(parts[i + 1], 10);\n                        break;\n                    case 'tcptype':\n                        candidate.tcpType = parts[i + 1];\n                        break;\n                    case 'ufrag':\n                        candidate.ufrag = parts[i + 1]; // for backward compability.\n                        candidate.usernameFragment = parts[i + 1];\n                        break;\n                    default: // extension handling, in particular ufrag\n                        candidate[parts[i]] = parts[i + 1];\n                        break;\n                }\n            }\n            return candidate;\n        };\n\n// Translates a candidate object into SDP candidate attribute.\n        SDPUtils.writeCandidate = function(candidate) {\n            var sdp = [];\n            sdp.push(candidate.foundation);\n            sdp.push(candidate.component);\n            sdp.push(candidate.protocol.toUpperCase());\n            sdp.push(candidate.priority);\n            sdp.push(candidate.ip);\n            sdp.push(candidate.port);\n\n            var type = candidate.type;\n            sdp.push('typ');\n            sdp.push(type);\n            if (type !== 'host' && candidate.relatedAddress &&\n                candidate.relatedPort) {\n                sdp.push('raddr');\n                sdp.push(candidate.relatedAddress);\n                sdp.push('rport');\n                sdp.push(candidate.relatedPort);\n            }\n            if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n                sdp.push('tcptype');\n                sdp.push(candidate.tcpType);\n            }\n            if (candidate.usernameFragment || candidate.ufrag) {\n                sdp.push('ufrag');\n                sdp.push(candidate.usernameFragment || candidate.ufrag);\n            }\n            return 'candidate:' + sdp.join(' ');\n        };\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\n        SDPUtils.parseIceOptions = function(line) {\n            return line.substr(14).split(' ');\n        }\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\n        SDPUtils.parseRtpMap = function(line) {\n            var parts = line.substr(9).split(' ');\n            var parsed = {\n                payloadType: parseInt(parts.shift(), 10) // was: id\n            };\n\n            parts = parts[0].split('/');\n\n            parsed.name = parts[0];\n            parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n            parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n            // legacy alias, got renamed back to channels in ORTC.\n            parsed.numChannels = parsed.channels;\n            return parsed;\n        };\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\n        SDPUtils.writeRtpMap = function(codec) {\n            var pt = codec.payloadType;\n            if (codec.preferredPayloadType !== undefined) {\n                pt = codec.preferredPayloadType;\n            }\n            var channels = codec.channels || codec.numChannels || 1;\n            return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n                (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n        };\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\n        SDPUtils.parseExtmap = function(line) {\n            var parts = line.substr(9).split(' ');\n            return {\n                id: parseInt(parts[0], 10),\n                direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n                uri: parts[1]\n            };\n        };\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\n        SDPUtils.writeExtmap = function(headerExtension) {\n            return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n                (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n                    ? '/' + headerExtension.direction\n                    : '') +\n                ' ' + headerExtension.uri + '\\r\\n';\n        };\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\n        SDPUtils.parseFmtp = function(line) {\n            var parsed = {};\n            var kv;\n            var parts = line.substr(line.indexOf(' ') + 1).split(';');\n            for (var j = 0; j < parts.length; j++) {\n                kv = parts[j].trim().split('=');\n                parsed[kv[0].trim()] = kv[1];\n            }\n            return parsed;\n        };\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\n        SDPUtils.writeFmtp = function(codec) {\n            var line = '';\n            var pt = codec.payloadType;\n            if (codec.preferredPayloadType !== undefined) {\n                pt = codec.preferredPayloadType;\n            }\n            if (codec.parameters && Object.keys(codec.parameters).length) {\n                var params = [];\n                Object.keys(codec.parameters).forEach(function(param) {\n                    if (codec.parameters[param]) {\n                        params.push(param + '=' + codec.parameters[param]);\n                    } else {\n                        params.push(param);\n                    }\n                });\n                line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n            }\n            return line;\n        };\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\n        SDPUtils.parseRtcpFb = function(line) {\n            var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n            return {\n                type: parts.shift(),\n                parameter: parts.join(' ')\n            };\n        };\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\n        SDPUtils.writeRtcpFb = function(codec) {\n            var lines = '';\n            var pt = codec.payloadType;\n            if (codec.preferredPayloadType !== undefined) {\n                pt = codec.preferredPayloadType;\n            }\n            if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n                // FIXME: special handling for trr-int?\n                codec.rtcpFeedback.forEach(function(fb) {\n                    lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n                        (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n                        '\\r\\n';\n                });\n            }\n            return lines;\n        };\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\n        SDPUtils.parseSsrcMedia = function(line) {\n            var sp = line.indexOf(' ');\n            var parts = {\n                ssrc: parseInt(line.substr(7, sp - 7), 10)\n            };\n            var colon = line.indexOf(':', sp);\n            if (colon > -1) {\n                parts.attribute = line.substr(sp + 1, colon - sp - 1);\n                parts.value = line.substr(colon + 1);\n            } else {\n                parts.attribute = line.substr(sp + 1);\n            }\n            return parts;\n        };\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\n        SDPUtils.getMid = function(mediaSection) {\n            var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n            if (mid) {\n                return mid.substr(6);\n            }\n        }\n\n        SDPUtils.parseFingerprint = function(line) {\n            var parts = line.substr(14).split(' ');\n            return {\n                algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n                value: parts[1]\n            };\n        };\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\n        SDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n            var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n                'a=fingerprint:');\n            // Note: a=setup line is ignored since we use the 'auto' role.\n            // Note2: 'algorithm' is not case sensitive except in Edge.\n            return {\n                role: 'auto',\n                fingerprints: lines.map(SDPUtils.parseFingerprint)\n            };\n        };\n\n// Serializes DTLS parameters to SDP.\n        SDPUtils.writeDtlsParameters = function(params, setupType) {\n            var sdp = 'a=setup:' + setupType + '\\r\\n';\n            params.fingerprints.forEach(function(fp) {\n                sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n            });\n            return sdp;\n        };\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\n        SDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n            var lines = SDPUtils.splitLines(mediaSection);\n            // Search in session part, too.\n            lines = lines.concat(SDPUtils.splitLines(sessionpart));\n            var iceParameters = {\n                usernameFragment: lines.filter(function(line) {\n                    return line.indexOf('a=ice-ufrag:') === 0;\n                })[0].substr(12),\n                password: lines.filter(function(line) {\n                    return line.indexOf('a=ice-pwd:') === 0;\n                })[0].substr(10)\n            };\n            return iceParameters;\n        };\n\n// Serializes ICE parameters to SDP.\n        SDPUtils.writeIceParameters = function(params) {\n            return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n                'a=ice-pwd:' + params.password + '\\r\\n';\n        };\n\n// Parses the SDP media section and returns RTCRtpParameters.\n        SDPUtils.parseRtpParameters = function(mediaSection) {\n            var description = {\n                codecs: [],\n                headerExtensions: [],\n                fecMechanisms: [],\n                rtcp: []\n            };\n            var lines = SDPUtils.splitLines(mediaSection);\n            var mline = lines[0].split(' ');\n            for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n                var pt = mline[i];\n                var rtpmapline = SDPUtils.matchPrefix(\n                    mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n                if (rtpmapline) {\n                    var codec = SDPUtils.parseRtpMap(rtpmapline);\n                    var fmtps = SDPUtils.matchPrefix(\n                        mediaSection, 'a=fmtp:' + pt + ' ');\n                    // Only the first a=fmtp:<pt> is considered.\n                    codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n                    codec.rtcpFeedback = SDPUtils.matchPrefix(\n                        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n                        .map(SDPUtils.parseRtcpFb);\n                    description.codecs.push(codec);\n                    // parse FEC mechanisms from rtpmap lines.\n                    switch (codec.name.toUpperCase()) {\n                        case 'RED':\n                        case 'ULPFEC':\n                            description.fecMechanisms.push(codec.name.toUpperCase());\n                            break;\n                        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n                            break;\n                    }\n                }\n            }\n            SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n                description.headerExtensions.push(SDPUtils.parseExtmap(line));\n            });\n            // FIXME: parse rtcp.\n            return description;\n        };\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\n        SDPUtils.writeRtpDescription = function(kind, caps) {\n            var sdp = '';\n\n            // Build the mline.\n            sdp += 'm=' + kind + ' ';\n            sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n            sdp += ' UDP/TLS/RTP/SAVPF ';\n            sdp += caps.codecs.map(function(codec) {\n                if (codec.preferredPayloadType !== undefined) {\n                    return codec.preferredPayloadType;\n                }\n                return codec.payloadType;\n            }).join(' ') + '\\r\\n';\n\n            sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n            sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n            // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n            caps.codecs.forEach(function(codec) {\n                sdp += SDPUtils.writeRtpMap(codec);\n                sdp += SDPUtils.writeFmtp(codec);\n                sdp += SDPUtils.writeRtcpFb(codec);\n            });\n            var maxptime = 0;\n            caps.codecs.forEach(function(codec) {\n                if (codec.maxptime > maxptime) {\n                    maxptime = codec.maxptime;\n                }\n            });\n            if (maxptime > 0) {\n                sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n            }\n            sdp += 'a=rtcp-mux\\r\\n';\n\n            if (caps.headerExtensions) {\n                caps.headerExtensions.forEach(function(extension) {\n                    sdp += SDPUtils.writeExtmap(extension);\n                });\n            }\n            // FIXME: write fecMechanisms.\n            return sdp;\n        };\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\n        SDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n            var encodingParameters = [];\n            var description = SDPUtils.parseRtpParameters(mediaSection);\n            var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n            var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n            // filter a=ssrc:... cname:, ignore PlanB-msid\n            var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                .map(function(line) {\n                    return SDPUtils.parseSsrcMedia(line);\n                })\n                .filter(function(parts) {\n                    return parts.attribute === 'cname';\n                });\n            var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n            var secondarySsrc;\n\n            var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n                .map(function(line) {\n                    var parts = line.substr(17).split(' ');\n                    return parts.map(function(part) {\n                        return parseInt(part, 10);\n                    });\n                });\n            if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n                secondarySsrc = flows[0][1];\n            }\n\n            description.codecs.forEach(function(codec) {\n                if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n                    var encParam = {\n                        ssrc: primarySsrc,\n                        codecPayloadType: parseInt(codec.parameters.apt, 10),\n                    };\n                    if (primarySsrc && secondarySsrc) {\n                        encParam.rtx = {ssrc: secondarySsrc};\n                    }\n                    encodingParameters.push(encParam);\n                    if (hasRed) {\n                        encParam = JSON.parse(JSON.stringify(encParam));\n                        encParam.fec = {\n                            ssrc: secondarySsrc,\n                            mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n                        };\n                        encodingParameters.push(encParam);\n                    }\n                }\n            });\n            if (encodingParameters.length === 0 && primarySsrc) {\n                encodingParameters.push({\n                    ssrc: primarySsrc\n                });\n            }\n\n            // we support both b=AS and b=TIAS but interpret AS as TIAS.\n            var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n            if (bandwidth.length) {\n                if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n                    bandwidth = parseInt(bandwidth[0].substr(7), 10);\n                } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n                    // use formula from JSEP to convert b=AS to TIAS value.\n                    bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n                        - (50 * 40 * 8);\n                } else {\n                    bandwidth = undefined;\n                }\n                encodingParameters.forEach(function(params) {\n                    params.maxBitrate = bandwidth;\n                });\n            }\n            return encodingParameters;\n        };\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\n        SDPUtils.parseRtcpParameters = function(mediaSection) {\n            var rtcpParameters = {};\n\n            var cname;\n            // Gets the first SSRC. Note that with RTX there might be multiple\n            // SSRCs.\n            var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                .map(function(line) {\n                    return SDPUtils.parseSsrcMedia(line);\n                })\n                .filter(function(obj) {\n                    return obj.attribute === 'cname';\n                })[0];\n            if (remoteSsrc) {\n                rtcpParameters.cname = remoteSsrc.value;\n                rtcpParameters.ssrc = remoteSsrc.ssrc;\n            }\n\n            // Edge uses the compound attribute instead of reducedSize\n            // compound is !reducedSize\n            var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n            rtcpParameters.reducedSize = rsize.length > 0;\n            rtcpParameters.compound = rsize.length === 0;\n\n            // parses the rtcp-mux attrіbute.\n            // Note that Edge does not support unmuxed RTCP.\n            var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n            rtcpParameters.mux = mux.length > 0;\n\n            return rtcpParameters;\n        };\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\n        SDPUtils.parseMsid = function(mediaSection) {\n            var parts;\n            var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n            if (spec.length === 1) {\n                parts = spec[0].substr(7).split(' ');\n                return {stream: parts[0], track: parts[1]};\n            }\n            var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n                .map(function(line) {\n                    return SDPUtils.parseSsrcMedia(line);\n                })\n                .filter(function(parts) {\n                    return parts.attribute === 'msid';\n                });\n            if (planB.length > 0) {\n                parts = planB[0].value.split(' ');\n                return {stream: parts[0], track: parts[1]};\n            }\n        };\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\n        SDPUtils.generateSessionId = function() {\n            return Math.random().toString().substr(2, 21);\n        };\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n        SDPUtils.writeSessionBoilerplate = function(sessId, sessVer) {\n            var sessionId;\n            var version = sessVer !== undefined ? sessVer : 2;\n            if (sessId) {\n                sessionId = sessId;\n            } else {\n                sessionId = SDPUtils.generateSessionId();\n            }\n            // FIXME: sess-id should be an NTP timestamp.\n            return 'v=0\\r\\n' +\n                'o=thisisadapterortc ' + sessionId + ' ' + version + ' IN IP4 127.0.0.1\\r\\n' +\n                's=-\\r\\n' +\n                't=0 0\\r\\n';\n        };\n\n        SDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n            var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n            // Map ICE parameters (ufrag, pwd) to SDP.\n            sdp += SDPUtils.writeIceParameters(\n                transceiver.iceGatherer.getLocalParameters());\n\n            // Map DTLS parameters to SDP.\n            sdp += SDPUtils.writeDtlsParameters(\n                transceiver.dtlsTransport.getLocalParameters(),\n                type === 'offer' ? 'actpass' : 'active');\n\n            sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n            if (transceiver.direction) {\n                sdp += 'a=' + transceiver.direction + '\\r\\n';\n            } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n                sdp += 'a=sendrecv\\r\\n';\n            } else if (transceiver.rtpSender) {\n                sdp += 'a=sendonly\\r\\n';\n            } else if (transceiver.rtpReceiver) {\n                sdp += 'a=recvonly\\r\\n';\n            } else {\n                sdp += 'a=inactive\\r\\n';\n            }\n\n            if (transceiver.rtpSender) {\n                // spec.\n                var msid = 'msid:' + stream.id + ' ' +\n                    transceiver.rtpSender.track.id + '\\r\\n';\n                sdp += 'a=' + msid;\n\n                // for Chrome.\n                sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n                    ' ' + msid;\n                if (transceiver.sendEncodingParameters[0].rtx) {\n                    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n                        ' ' + msid;\n                    sdp += 'a=ssrc-group:FID ' +\n                        transceiver.sendEncodingParameters[0].ssrc + ' ' +\n                        transceiver.sendEncodingParameters[0].rtx.ssrc +\n                        '\\r\\n';\n                }\n            }\n            // FIXME: this should be written by writeRtpDescription.\n            sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n                ' cname:' + SDPUtils.localCName + '\\r\\n';\n            if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n                sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n                    ' cname:' + SDPUtils.localCName + '\\r\\n';\n            }\n            return sdp;\n        };\n\n// Gets the direction from the mediaSection or the sessionpart.\n        SDPUtils.getDirection = function(mediaSection, sessionpart) {\n            // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n            var lines = SDPUtils.splitLines(mediaSection);\n            for (var i = 0; i < lines.length; i++) {\n                switch (lines[i]) {\n                    case 'a=sendrecv':\n                    case 'a=sendonly':\n                    case 'a=recvonly':\n                    case 'a=inactive':\n                        return lines[i].substr(2);\n                    default:\n                    // FIXME: What should happen here?\n                }\n            }\n            if (sessionpart) {\n                return SDPUtils.getDirection(sessionpart);\n            }\n            return 'sendrecv';\n        };\n\n        SDPUtils.getKind = function(mediaSection) {\n            var lines = SDPUtils.splitLines(mediaSection);\n            var mline = lines[0].split(' ');\n            return mline[0].substr(2);\n        };\n\n        SDPUtils.isRejected = function(mediaSection) {\n            return mediaSection.split(' ', 2)[1] === '0';\n        };\n\n        SDPUtils.parseMLine = function(mediaSection) {\n            var lines = SDPUtils.splitLines(mediaSection);\n            var parts = lines[0].substr(2).split(' ');\n            return {\n                kind: parts[0],\n                port: parseInt(parts[1], 10),\n                protocol: parts[2],\n                fmt: parts.slice(3).join(' ')\n            };\n        };\n\n        SDPUtils.parseOLine = function(mediaSection) {\n            var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n            var parts = line.substr(2).split(' ');\n            return {\n                username: parts[0],\n                sessionId: parts[1],\n                sessionVersion: parseInt(parts[2], 10),\n                netType: parts[3],\n                addressType: parts[4],\n                address: parts[5],\n            };\n        }\n\n// Expose public methods.\n        if (typeof module === 'object') {\n            module.exports = SDPUtils;\n        }\n\n    },{}],3:[function(require,module,exports){\n        (function (global){\n            /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n            /* eslint-env node */\n\n            'use strict';\n\n            var adapterFactory = require('./adapter_factory.js');\n            module.exports = adapterFactory({window: global.window});\n\n        }).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n    },{\"./adapter_factory.js\":4}],4:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n\n        'use strict';\n\n        var utils = require('./utils');\n// Shimming starts here.\n        module.exports = function(dependencies, opts) {\n            var window = dependencies && dependencies.window;\n\n            var options = {\n                shimChrome: true,\n                shimFirefox: true,\n                shimEdge: true,\n                shimSafari: true,\n            };\n\n            for (var key in opts) {\n                if (hasOwnProperty.call(opts, key)) {\n                    options[key] = opts[key];\n                }\n            }\n\n            // Utils.\n            var logging = utils.log;\n            var browserDetails = utils.detectBrowser(window);\n\n            // Uncomment the line below if you want logging to occur, including logging\n            // for the switch statement below. Can also be turned on in the browser via\n            // adapter.disableLog(false), but then logging from the switch statement below\n            // will not appear.\n            // require('./utils').disableLog(false);\n\n            // Browser shims.\n            var chromeShim = require('./chrome/chrome_shim') || null;\n            var edgeShim = require('./edge/edge_shim') || null;\n            var firefoxShim = require('./firefox/firefox_shim') || null;\n            var safariShim = require('./safari/safari_shim') || null;\n            var commonShim = require('./common_shim') || null;\n\n            // Export to the adapter global object visible in the browser.\n            var adapter = {\n                browserDetails: browserDetails,\n                commonShim: commonShim,\n                extractVersion: utils.extractVersion,\n                disableLog: utils.disableLog,\n                disableWarnings: utils.disableWarnings\n            };\n\n            // Shim browser if found.\n            switch (browserDetails.browser) {\n                case 'chrome':\n                    if (!chromeShim || !chromeShim.shimPeerConnection ||\n                        !options.shimChrome) {\n                        logging('Chrome shim is not included in this adapter release.');\n                        return adapter;\n                    }\n                    logging('adapter.js shimming chrome.');\n                    // Export to the adapter global object visible in the browser.\n                    adapter.browserShim = chromeShim;\n                    commonShim.shimCreateObjectURL(window);\n\n                    chromeShim.shimGetUserMedia(window);\n                    chromeShim.shimMediaStream(window);\n                    chromeShim.shimSourceObject(window);\n                    chromeShim.shimPeerConnection(window);\n                    chromeShim.shimOnTrack(window);\n                    chromeShim.shimAddTrackRemoveTrack(window);\n                    chromeShim.shimGetSendersWithDtmf(window);\n                    chromeShim.shimSenderReceiverGetStats(window);\n                    chromeShim.fixNegotiationNeeded(window);\n\n                    commonShim.shimRTCIceCandidate(window);\n                    commonShim.shimMaxMessageSize(window);\n                    commonShim.shimSendThrowTypeError(window);\n                    break;\n                case 'firefox':\n                    if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n                        !options.shimFirefox) {\n                        logging('Firefox shim is not included in this adapter release.');\n                        return adapter;\n                    }\n                    logging('adapter.js shimming firefox.');\n                    // Export to the adapter global object visible in the browser.\n                    adapter.browserShim = firefoxShim;\n                    commonShim.shimCreateObjectURL(window);\n\n                    firefoxShim.shimGetUserMedia(window);\n                    firefoxShim.shimSourceObject(window);\n                    firefoxShim.shimPeerConnection(window);\n                    firefoxShim.shimOnTrack(window);\n                    firefoxShim.shimRemoveStream(window);\n                    firefoxShim.shimSenderGetStats(window);\n                    firefoxShim.shimReceiverGetStats(window);\n                    firefoxShim.shimRTCDataChannel(window);\n\n                    commonShim.shimRTCIceCandidate(window);\n                    commonShim.shimMaxMessageSize(window);\n                    commonShim.shimSendThrowTypeError(window);\n                    break;\n                case 'edge':\n                    if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n                        logging('MS edge shim is not included in this adapter release.');\n                        return adapter;\n                    }\n                    logging('adapter.js shimming edge.');\n                    // Export to the adapter global object visible in the browser.\n                    adapter.browserShim = edgeShim;\n                    commonShim.shimCreateObjectURL(window);\n\n                    edgeShim.shimGetUserMedia(window);\n                    edgeShim.shimPeerConnection(window);\n                    edgeShim.shimReplaceTrack(window);\n\n                    // the edge shim implements the full RTCIceCandidate object.\n\n                    commonShim.shimMaxMessageSize(window);\n                    commonShim.shimSendThrowTypeError(window);\n                    break;\n                case 'safari':\n                    if (!safariShim || !options.shimSafari) {\n                        logging('Safari shim is not included in this adapter release.');\n                        return adapter;\n                    }\n                    logging('adapter.js shimming safari.');\n                    // Export to the adapter global object visible in the browser.\n                    adapter.browserShim = safariShim;\n                    commonShim.shimCreateObjectURL(window);\n\n                    safariShim.shimRTCIceServerUrls(window);\n                    safariShim.shimCallbacksAPI(window);\n                    safariShim.shimLocalStreamsAPI(window);\n                    safariShim.shimRemoteStreamsAPI(window);\n                    safariShim.shimTrackEventTransceiver(window);\n                    safariShim.shimGetUserMedia(window);\n                    safariShim.shimCreateOfferLegacy(window);\n\n                    commonShim.shimRTCIceCandidate(window);\n                    commonShim.shimMaxMessageSize(window);\n                    commonShim.shimSendThrowTypeError(window);\n                    break;\n                default:\n                    logging('Unsupported browser!');\n                    break;\n            }\n\n            return adapter;\n        };\n\n    },{\"./chrome/chrome_shim\":5,\"./common_shim\":7,\"./edge/edge_shim\":8,\"./firefox/firefox_shim\":11,\"./safari/safari_shim\":13,\"./utils\":14}],5:[function(require,module,exports){\n\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n        var utils = require('../utils.js');\n        var logging = utils.log;\n\n        /* iterates the stats graph recursively. */\n        function walkStats(stats, base, resultSet) {\n            if (!base || resultSet.has(base.id)) {\n                return;\n            }\n            resultSet.set(base.id, base);\n            Object.keys(base).forEach(function(name) {\n                if (name.endsWith('Id')) {\n                    walkStats(stats, stats.get(base[name]), resultSet);\n                } else if (name.endsWith('Ids')) {\n                    base[name].forEach(function(id) {\n                        walkStats(stats, stats.get(id), resultSet);\n                    });\n                }\n            });\n        }\n\n        /* filter getStats for a sender/receiver track. */\n        function filterStats(result, track, outbound) {\n            var streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n            var filteredResult = new Map();\n            if (track === null) {\n                return filteredResult;\n            }\n            var trackStats = [];\n            result.forEach(function(value) {\n                if (value.type === 'track' &&\n                    value.trackIdentifier === track.id) {\n                    trackStats.push(value);\n                }\n            });\n            trackStats.forEach(function(trackStat) {\n                result.forEach(function(stats) {\n                    if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n                        walkStats(result, stats, filteredResult);\n                    }\n                });\n            });\n            return filteredResult;\n        }\n\n        module.exports = {\n            shimGetUserMedia: require('./getusermedia'),\n            shimMediaStream: function(window) {\n                window.MediaStream = window.MediaStream || window.webkitMediaStream;\n            },\n\n            shimOnTrack: function(window) {\n                if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n                        window.RTCPeerConnection.prototype)) {\n                    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n                        get: function() {\n                            return this._ontrack;\n                        },\n                        set: function(f) {\n                            if (this._ontrack) {\n                                this.removeEventListener('track', this._ontrack);\n                            }\n                            this.addEventListener('track', this._ontrack = f);\n                        },\n                        enumerable: true,\n                        configurable: true\n                    });\n                    var origSetRemoteDescription =\n                        window.RTCPeerConnection.prototype.setRemoteDescription;\n                    window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n                        var pc = this;\n                        if (!pc._ontrackpoly) {\n                            pc._ontrackpoly = function(e) {\n                                // onaddstream does not fire when a track is added to an existing\n                                // stream. But stream.onaddtrack is implemented so we use that.\n                                e.stream.addEventListener('addtrack', function(te) {\n                                    var receiver;\n                                    if (window.RTCPeerConnection.prototype.getReceivers) {\n                                        receiver = pc.getReceivers().find(function(r) {\n                                            return r.track && r.track.id === te.track.id;\n                                        });\n                                    } else {\n                                        receiver = {track: te.track};\n                                    }\n\n                                    var event = new Event('track');\n                                    event.track = te.track;\n                                    event.receiver = receiver;\n                                    event.transceiver = {receiver: receiver};\n                                    event.streams = [e.stream];\n                                    pc.dispatchEvent(event);\n                                });\n                                e.stream.getTracks().forEach(function(track) {\n                                    var receiver;\n                                    if (window.RTCPeerConnection.prototype.getReceivers) {\n                                        receiver = pc.getReceivers().find(function(r) {\n                                            return r.track && r.track.id === track.id;\n                                        });\n                                    } else {\n                                        receiver = {track: track};\n                                    }\n                                    var event = new Event('track');\n                                    event.track = track;\n                                    event.receiver = receiver;\n                                    event.transceiver = {receiver: receiver};\n                                    event.streams = [e.stream];\n                                    pc.dispatchEvent(event);\n                                });\n                            };\n                            pc.addEventListener('addstream', pc._ontrackpoly);\n                        }\n                        return origSetRemoteDescription.apply(pc, arguments);\n                    };\n                } else if (!('RTCRtpTransceiver' in window)) {\n                    utils.wrapPeerConnectionEvent(window, 'track', function(e) {\n                        if (!e.transceiver) {\n                            e.transceiver = {receiver: e.receiver};\n                        }\n                        return e;\n                    });\n                }\n            },\n\n            shimGetSendersWithDtmf: function(window) {\n                // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n                if (typeof window === 'object' && window.RTCPeerConnection &&\n                    !('getSenders' in window.RTCPeerConnection.prototype) &&\n                    'createDTMFSender' in window.RTCPeerConnection.prototype) {\n                    var shimSenderWithDtmf = function(pc, track) {\n                        return {\n                            track: track,\n                            get dtmf() {\n                                if (this._dtmf === undefined) {\n                                    if (track.kind === 'audio') {\n                                        this._dtmf = pc.createDTMFSender(track);\n                                    } else {\n                                        this._dtmf = null;\n                                    }\n                                }\n                                return this._dtmf;\n                            },\n                            _pc: pc\n                        };\n                    };\n\n                    // augment addTrack when getSenders is not available.\n                    if (!window.RTCPeerConnection.prototype.getSenders) {\n                        window.RTCPeerConnection.prototype.getSenders = function() {\n                            this._senders = this._senders || [];\n                            return this._senders.slice(); // return a copy of the internal state.\n                        };\n                        var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n                        window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n                            var pc = this;\n                            var sender = origAddTrack.apply(pc, arguments);\n                            if (!sender) {\n                                sender = shimSenderWithDtmf(pc, track);\n                                pc._senders.push(sender);\n                            }\n                            return sender;\n                        };\n\n                        var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n                        window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n                            var pc = this;\n                            origRemoveTrack.apply(pc, arguments);\n                            var idx = pc._senders.indexOf(sender);\n                            if (idx !== -1) {\n                                pc._senders.splice(idx, 1);\n                            }\n                        };\n                    }\n                    var origAddStream = window.RTCPeerConnection.prototype.addStream;\n                    window.RTCPeerConnection.prototype.addStream = function(stream) {\n                        var pc = this;\n                        pc._senders = pc._senders || [];\n                        origAddStream.apply(pc, [stream]);\n                        stream.getTracks().forEach(function(track) {\n                            pc._senders.push(shimSenderWithDtmf(pc, track));\n                        });\n                    };\n\n                    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n                    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n                        var pc = this;\n                        pc._senders = pc._senders || [];\n                        origRemoveStream.apply(pc, [stream]);\n\n                        stream.getTracks().forEach(function(track) {\n                            var sender = pc._senders.find(function(s) {\n                                return s.track === track;\n                            });\n                            if (sender) {\n                                pc._senders.splice(pc._senders.indexOf(sender), 1); // remove sender\n                            }\n                        });\n                    };\n                } else if (typeof window === 'object' && window.RTCPeerConnection &&\n                    'getSenders' in window.RTCPeerConnection.prototype &&\n                    'createDTMFSender' in window.RTCPeerConnection.prototype &&\n                    window.RTCRtpSender &&\n                    !('dtmf' in window.RTCRtpSender.prototype)) {\n                    var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n                    window.RTCPeerConnection.prototype.getSenders = function() {\n                        var pc = this;\n                        var senders = origGetSenders.apply(pc, []);\n                        senders.forEach(function(sender) {\n                            sender._pc = pc;\n                        });\n                        return senders;\n                    };\n\n                    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n                        get: function() {\n                            if (this._dtmf === undefined) {\n                                if (this.track.kind === 'audio') {\n                                    this._dtmf = this._pc.createDTMFSender(this.track);\n                                } else {\n                                    this._dtmf = null;\n                                }\n                            }\n                            return this._dtmf;\n                        }\n                    });\n                }\n            },\n\n            shimSenderReceiverGetStats: function(window) {\n                if (!(typeof window === 'object' && window.RTCPeerConnection &&\n                        window.RTCRtpSender && window.RTCRtpReceiver)) {\n                    return;\n                }\n\n                // shim sender stats.\n                if (!('getStats' in window.RTCRtpSender.prototype)) {\n                    var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n                    if (origGetSenders) {\n                        window.RTCPeerConnection.prototype.getSenders = function() {\n                            var pc = this;\n                            var senders = origGetSenders.apply(pc, []);\n                            senders.forEach(function(sender) {\n                                sender._pc = pc;\n                            });\n                            return senders;\n                        };\n                    }\n\n                    var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n                    if (origAddTrack) {\n                        window.RTCPeerConnection.prototype.addTrack = function() {\n                            var sender = origAddTrack.apply(this, arguments);\n                            sender._pc = this;\n                            return sender;\n                        };\n                    }\n                    window.RTCRtpSender.prototype.getStats = function() {\n                        var sender = this;\n                        return this._pc.getStats().then(function(result) {\n                            /* Note: this will include stats of all senders that\n           *   send a track with the same id as sender.track as\n           *   it is not possible to identify the RTCRtpSender.\n           */\n                            return filterStats(result, sender.track, true);\n                        });\n                    };\n                }\n\n                // shim receiver stats.\n                if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n                    var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n                    if (origGetReceivers) {\n                        window.RTCPeerConnection.prototype.getReceivers = function() {\n                            var pc = this;\n                            var receivers = origGetReceivers.apply(pc, []);\n                            receivers.forEach(function(receiver) {\n                                receiver._pc = pc;\n                            });\n                            return receivers;\n                        };\n                    }\n                    utils.wrapPeerConnectionEvent(window, 'track', function(e) {\n                        e.receiver._pc = e.srcElement;\n                        return e;\n                    });\n                    window.RTCRtpReceiver.prototype.getStats = function() {\n                        var receiver = this;\n                        return this._pc.getStats().then(function(result) {\n                            return filterStats(result, receiver.track, false);\n                        });\n                    };\n                }\n\n                if (!('getStats' in window.RTCRtpSender.prototype &&\n                        'getStats' in window.RTCRtpReceiver.prototype)) {\n                    return;\n                }\n\n                // shim RTCPeerConnection.getStats(track).\n                var origGetStats = window.RTCPeerConnection.prototype.getStats;\n                window.RTCPeerConnection.prototype.getStats = function() {\n                    var pc = this;\n                    if (arguments.length > 0 &&\n                        arguments[0] instanceof window.MediaStreamTrack) {\n                        var track = arguments[0];\n                        var sender;\n                        var receiver;\n                        var err;\n                        pc.getSenders().forEach(function(s) {\n                            if (s.track === track) {\n                                if (sender) {\n                                    err = true;\n                                } else {\n                                    sender = s;\n                                }\n                            }\n                        });\n                        pc.getReceivers().forEach(function(r) {\n                            if (r.track === track) {\n                                if (receiver) {\n                                    err = true;\n                                } else {\n                                    receiver = r;\n                                }\n                            }\n                            return r.track === track;\n                        });\n                        if (err || (sender && receiver)) {\n                            return Promise.reject(new DOMException(\n                                'There are more than one sender or receiver for the track.',\n                                'InvalidAccessError'));\n                        } else if (sender) {\n                            return sender.getStats();\n                        } else if (receiver) {\n                            return receiver.getStats();\n                        }\n                        return Promise.reject(new DOMException(\n                            'There is no sender or receiver for the track.',\n                            'InvalidAccessError'));\n                    }\n                    return origGetStats.apply(pc, arguments);\n                };\n            },\n\n            shimSourceObject: function(window) {\n                var URL = window && window.URL;\n\n                if (typeof window === 'object') {\n                    if (window.HTMLMediaElement &&\n                        !('srcObject' in window.HTMLMediaElement.prototype)) {\n                        // Shim the srcObject property, once, when HTMLMediaElement is found.\n                        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n                            get: function() {\n                                return this._srcObject;\n                            },\n                            set: function(stream) {\n                                var self = this;\n                                // Use _srcObject as a private property for this shim\n                                this._srcObject = stream;\n                                if (this.src) {\n                                    URL.revokeObjectURL(this.src);\n                                }\n\n                                if (!stream) {\n                                    this.src = '';\n                                    return undefined;\n                                }\n                                this.src = URL.createObjectURL(stream);\n                                // We need to recreate the blob url when a track is added or\n                                // removed. Doing it manually since we want to avoid a recursion.\n                                stream.addEventListener('addtrack', function() {\n                                    if (self.src) {\n                                        URL.revokeObjectURL(self.src);\n                                    }\n                                    self.src = URL.createObjectURL(stream);\n                                });\n                                stream.addEventListener('removetrack', function() {\n                                    if (self.src) {\n                                        URL.revokeObjectURL(self.src);\n                                    }\n                                    self.src = URL.createObjectURL(stream);\n                                });\n                            }\n                        });\n                    }\n                }\n            },\n\n            shimAddTrackRemoveTrackWithNative: function(window) {\n                // shim addTrack/removeTrack with native variants in order to make\n                // the interactions with legacy getLocalStreams behave as in other browsers.\n                // Keeps a mapping stream.id => [stream, rtpsenders...]\n                window.RTCPeerConnection.prototype.getLocalStreams = function() {\n                    var pc = this;\n                    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n                    return Object.keys(this._shimmedLocalStreams).map(function(streamId) {\n                        return pc._shimmedLocalStreams[streamId][0];\n                    });\n                };\n\n                var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n                window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n                    if (!stream) {\n                        return origAddTrack.apply(this, arguments);\n                    }\n                    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n                    var sender = origAddTrack.apply(this, arguments);\n                    if (!this._shimmedLocalStreams[stream.id]) {\n                        this._shimmedLocalStreams[stream.id] = [stream, sender];\n                    } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n                        this._shimmedLocalStreams[stream.id].push(sender);\n                    }\n                    return sender;\n                };\n\n                var origAddStream = window.RTCPeerConnection.prototype.addStream;\n                window.RTCPeerConnection.prototype.addStream = function(stream) {\n                    var pc = this;\n                    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n                    stream.getTracks().forEach(function(track) {\n                        var alreadyExists = pc.getSenders().find(function(s) {\n                            return s.track === track;\n                        });\n                        if (alreadyExists) {\n                            throw new DOMException('Track already exists.',\n                                'InvalidAccessError');\n                        }\n                    });\n                    var existingSenders = pc.getSenders();\n                    origAddStream.apply(this, arguments);\n                    var newSenders = pc.getSenders().filter(function(newSender) {\n                        return existingSenders.indexOf(newSender) === -1;\n                    });\n                    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n                };\n\n                var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n                window.RTCPeerConnection.prototype.removeStream = function(stream) {\n                    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n                    delete this._shimmedLocalStreams[stream.id];\n                    return origRemoveStream.apply(this, arguments);\n                };\n\n                var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n                window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n                    var pc = this;\n                    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n                    if (sender) {\n                        Object.keys(this._shimmedLocalStreams).forEach(function(streamId) {\n                            var idx = pc._shimmedLocalStreams[streamId].indexOf(sender);\n                            if (idx !== -1) {\n                                pc._shimmedLocalStreams[streamId].splice(idx, 1);\n                            }\n                            if (pc._shimmedLocalStreams[streamId].length === 1) {\n                                delete pc._shimmedLocalStreams[streamId];\n                            }\n                        });\n                    }\n                    return origRemoveTrack.apply(this, arguments);\n                };\n            },\n\n            shimAddTrackRemoveTrack: function(window) {\n                var browserDetails = utils.detectBrowser(window);\n                // shim addTrack and removeTrack.\n                if (window.RTCPeerConnection.prototype.addTrack &&\n                    browserDetails.version >= 65) {\n                    return this.shimAddTrackRemoveTrackWithNative(window);\n                }\n\n                // also shim pc.getLocalStreams when addTrack is shimmed\n                // to return the original streams.\n                var origGetLocalStreams = window.RTCPeerConnection.prototype\n                    .getLocalStreams;\n                window.RTCPeerConnection.prototype.getLocalStreams = function() {\n                    var pc = this;\n                    var nativeStreams = origGetLocalStreams.apply(this);\n                    pc._reverseStreams = pc._reverseStreams || {};\n                    return nativeStreams.map(function(stream) {\n                        return pc._reverseStreams[stream.id];\n                    });\n                };\n\n                var origAddStream = window.RTCPeerConnection.prototype.addStream;\n                window.RTCPeerConnection.prototype.addStream = function(stream) {\n                    var pc = this;\n                    pc._streams = pc._streams || {};\n                    pc._reverseStreams = pc._reverseStreams || {};\n\n                    stream.getTracks().forEach(function(track) {\n                        var alreadyExists = pc.getSenders().find(function(s) {\n                            return s.track === track;\n                        });\n                        if (alreadyExists) {\n                            throw new DOMException('Track already exists.',\n                                'InvalidAccessError');\n                        }\n                    });\n                    // Add identity mapping for consistency with addTrack.\n                    // Unless this is being used with a stream from addTrack.\n                    if (!pc._reverseStreams[stream.id]) {\n                        var newStream = new window.MediaStream(stream.getTracks());\n                        pc._streams[stream.id] = newStream;\n                        pc._reverseStreams[newStream.id] = stream;\n                        stream = newStream;\n                    }\n                    origAddStream.apply(pc, [stream]);\n                };\n\n                var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n                window.RTCPeerConnection.prototype.removeStream = function(stream) {\n                    var pc = this;\n                    pc._streams = pc._streams || {};\n                    pc._reverseStreams = pc._reverseStreams || {};\n\n                    origRemoveStream.apply(pc, [(pc._streams[stream.id] || stream)]);\n                    delete pc._reverseStreams[(pc._streams[stream.id] ?\n                        pc._streams[stream.id].id : stream.id)];\n                    delete pc._streams[stream.id];\n                };\n\n                window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n                    var pc = this;\n                    if (pc.signalingState === 'closed') {\n                        throw new DOMException(\n                            'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n                            'InvalidStateError');\n                    }\n                    var streams = [].slice.call(arguments, 1);\n                    if (streams.length !== 1 ||\n                        !streams[0].getTracks().find(function(t) {\n                            return t === track;\n                        })) {\n                        // this is not fully correct but all we can manage without\n                        // [[associated MediaStreams]] internal slot.\n                        throw new DOMException(\n                            'The adapter.js addTrack polyfill only supports a single ' +\n                            ' stream which is associated with the specified track.',\n                            'NotSupportedError');\n                    }\n\n                    var alreadyExists = pc.getSenders().find(function(s) {\n                        return s.track === track;\n                    });\n                    if (alreadyExists) {\n                        throw new DOMException('Track already exists.',\n                            'InvalidAccessError');\n                    }\n\n                    pc._streams = pc._streams || {};\n                    pc._reverseStreams = pc._reverseStreams || {};\n                    var oldStream = pc._streams[stream.id];\n                    if (oldStream) {\n                        // this is using odd Chrome behaviour, use with caution:\n                        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n                        // Note: we rely on the high-level addTrack/dtmf shim to\n                        // create the sender with a dtmf sender.\n                        oldStream.addTrack(track);\n\n                        // Trigger ONN async.\n                        Promise.resolve().then(function() {\n                            pc.dispatchEvent(new Event('negotiationneeded'));\n                        });\n                    } else {\n                        var newStream = new window.MediaStream([track]);\n                        pc._streams[stream.id] = newStream;\n                        pc._reverseStreams[newStream.id] = stream;\n                        pc.addStream(newStream);\n                    }\n                    return pc.getSenders().find(function(s) {\n                        return s.track === track;\n                    });\n                };\n\n                // replace the internal stream id with the external one and\n                // vice versa.\n                function replaceInternalStreamId(pc, description) {\n                    var sdp = description.sdp;\n                    Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\n                        var externalStream = pc._reverseStreams[internalId];\n                        var internalStream = pc._streams[externalStream.id];\n                        sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n                            externalStream.id);\n                    });\n                    return new RTCSessionDescription({\n                        type: description.type,\n                        sdp: sdp\n                    });\n                }\n                function replaceExternalStreamId(pc, description) {\n                    var sdp = description.sdp;\n                    Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\n                        var externalStream = pc._reverseStreams[internalId];\n                        var internalStream = pc._streams[externalStream.id];\n                        sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n                            internalStream.id);\n                    });\n                    return new RTCSessionDescription({\n                        type: description.type,\n                        sdp: sdp\n                    });\n                }\n                ['createOffer', 'createAnswer'].forEach(function(method) {\n                    var nativeMethod = window.RTCPeerConnection.prototype[method];\n                    window.RTCPeerConnection.prototype[method] = function() {\n                        var pc = this;\n                        var args = arguments;\n                        var isLegacyCall = arguments.length &&\n                            typeof arguments[0] === 'function';\n                        if (isLegacyCall) {\n                            return nativeMethod.apply(pc, [\n                                function(description) {\n                                    var desc = replaceInternalStreamId(pc, description);\n                                    args[0].apply(null, [desc]);\n                                },\n                                function(err) {\n                                    if (args[1]) {\n                                        args[1].apply(null, err);\n                                    }\n                                }, arguments[2]\n                            ]);\n                        }\n                        return nativeMethod.apply(pc, arguments)\n                            .then(function(description) {\n                                return replaceInternalStreamId(pc, description);\n                            });\n                    };\n                });\n\n                var origSetLocalDescription =\n                    window.RTCPeerConnection.prototype.setLocalDescription;\n                window.RTCPeerConnection.prototype.setLocalDescription = function() {\n                    var pc = this;\n                    if (!arguments.length || !arguments[0].type) {\n                        return origSetLocalDescription.apply(pc, arguments);\n                    }\n                    arguments[0] = replaceExternalStreamId(pc, arguments[0]);\n                    return origSetLocalDescription.apply(pc, arguments);\n                };\n\n                // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n                var origLocalDescription = Object.getOwnPropertyDescriptor(\n                    window.RTCPeerConnection.prototype, 'localDescription');\n                Object.defineProperty(window.RTCPeerConnection.prototype,\n                    'localDescription', {\n                        get: function() {\n                            var pc = this;\n                            var description = origLocalDescription.get.apply(this);\n                            if (description.type === '') {\n                                return description;\n                            }\n                            return replaceInternalStreamId(pc, description);\n                        }\n                    });\n\n                window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n                    var pc = this;\n                    if (pc.signalingState === 'closed') {\n                        throw new DOMException(\n                            'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n                            'InvalidStateError');\n                    }\n                    // We can not yet check for sender instanceof RTCRtpSender\n                    // since we shim RTPSender. So we check if sender._pc is set.\n                    if (!sender._pc) {\n                        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n                            'does not implement interface RTCRtpSender.', 'TypeError');\n                    }\n                    var isLocal = sender._pc === pc;\n                    if (!isLocal) {\n                        throw new DOMException('Sender was not created by this connection.',\n                            'InvalidAccessError');\n                    }\n\n                    // Search for the native stream the senders track belongs to.\n                    pc._streams = pc._streams || {};\n                    var stream;\n                    Object.keys(pc._streams).forEach(function(streamid) {\n                        var hasTrack = pc._streams[streamid].getTracks().find(function(track) {\n                            return sender.track === track;\n                        });\n                        if (hasTrack) {\n                            stream = pc._streams[streamid];\n                        }\n                    });\n\n                    if (stream) {\n                        if (stream.getTracks().length === 1) {\n                            // if this is the last track of the stream, remove the stream. This\n                            // takes care of any shimmed _senders.\n                            pc.removeStream(pc._reverseStreams[stream.id]);\n                        } else {\n                            // relying on the same odd chrome behaviour as above.\n                            stream.removeTrack(sender.track);\n                        }\n                        pc.dispatchEvent(new Event('negotiationneeded'));\n                    }\n                };\n            },\n\n            shimPeerConnection: function(window) {\n                var browserDetails = utils.detectBrowser(window);\n\n                // The RTCPeerConnection object.\n                if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n                    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n                        // Translate iceTransportPolicy to iceTransports,\n                        // see https://code.google.com/p/webrtc/issues/detail?id=4869\n                        // this was fixed in M56 along with unprefixing RTCPeerConnection.\n                        logging('PeerConnection');\n                        if (pcConfig && pcConfig.iceTransportPolicy) {\n                            pcConfig.iceTransports = pcConfig.iceTransportPolicy;\n                        }\n\n                        return new window.webkitRTCPeerConnection(pcConfig, pcConstraints);\n                    };\n                    window.RTCPeerConnection.prototype =\n                        window.webkitRTCPeerConnection.prototype;\n                    // wrap static methods. Currently just generateCertificate.\n                    if (window.webkitRTCPeerConnection.generateCertificate) {\n                        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                            get: function() {\n                                return window.webkitRTCPeerConnection.generateCertificate;\n                            }\n                        });\n                    }\n                } else {\n                    // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n                    var OrigPeerConnection = window.RTCPeerConnection;\n                    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n                        if (pcConfig && pcConfig.iceServers) {\n                            var newIceServers = [];\n                            for (var i = 0; i < pcConfig.iceServers.length; i++) {\n                                var server = pcConfig.iceServers[i];\n                                if (!server.hasOwnProperty('urls') &&\n                                    server.hasOwnProperty('url')) {\n                                    utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n                                    server = JSON.parse(JSON.stringify(server));\n                                    server.urls = server.url;\n                                    newIceServers.push(server);\n                                } else {\n                                    newIceServers.push(pcConfig.iceServers[i]);\n                                }\n                            }\n                            pcConfig.iceServers = newIceServers;\n                        }\n                        return new OrigPeerConnection(pcConfig, pcConstraints);\n                    };\n                    window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n                    // wrap static methods. Currently just generateCertificate.\n                    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                        get: function() {\n                            return OrigPeerConnection.generateCertificate;\n                        }\n                    });\n                }\n\n                var origGetStats = window.RTCPeerConnection.prototype.getStats;\n                window.RTCPeerConnection.prototype.getStats = function(selector,\n                                                                       successCallback, errorCallback) {\n                    var pc = this;\n                    var args = arguments;\n\n                    // If selector is a function then we are in the old style stats so just\n                    // pass back the original getStats format to avoid breaking old users.\n                    if (arguments.length > 0 && typeof selector === 'function') {\n                        return origGetStats.apply(this, arguments);\n                    }\n\n                    // When spec-style getStats is supported, return those when called with\n                    // either no arguments or the selector argument is null.\n                    if (origGetStats.length === 0 && (arguments.length === 0 ||\n                            typeof arguments[0] !== 'function')) {\n                        return origGetStats.apply(this, []);\n                    }\n\n                    var fixChromeStats_ = function(response) {\n                        var standardReport = {};\n                        var reports = response.result();\n                        reports.forEach(function(report) {\n                            var standardStats = {\n                                id: report.id,\n                                timestamp: report.timestamp,\n                                type: {\n                                    localcandidate: 'local-candidate',\n                                    remotecandidate: 'remote-candidate'\n                                }[report.type] || report.type\n                            };\n                            report.names().forEach(function(name) {\n                                standardStats[name] = report.stat(name);\n                            });\n                            standardReport[standardStats.id] = standardStats;\n                        });\n\n                        return standardReport;\n                    };\n\n                    // shim getStats with maplike support\n                    var makeMapStats = function(stats) {\n                        return new Map(Object.keys(stats).map(function(key) {\n                            return [key, stats[key]];\n                        }));\n                    };\n\n                    if (arguments.length >= 2) {\n                        var successCallbackWrapper_ = function(response) {\n                            args[1](makeMapStats(fixChromeStats_(response)));\n                        };\n\n                        return origGetStats.apply(this, [successCallbackWrapper_,\n                            arguments[0]]);\n                    }\n\n                    // promise-support\n                    return new Promise(function(resolve, reject) {\n                        origGetStats.apply(pc, [\n                            function(response) {\n                                resolve(makeMapStats(fixChromeStats_(response)));\n                            }, reject]);\n                    }).then(successCallback, errorCallback);\n                };\n\n                // add promise support -- natively available in Chrome 51\n                if (browserDetails.version < 51) {\n                    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n                        .forEach(function(method) {\n                            var nativeMethod = window.RTCPeerConnection.prototype[method];\n                            window.RTCPeerConnection.prototype[method] = function() {\n                                var args = arguments;\n                                var pc = this;\n                                var promise = new Promise(function(resolve, reject) {\n                                    nativeMethod.apply(pc, [args[0], resolve, reject]);\n                                });\n                                if (args.length < 2) {\n                                    return promise;\n                                }\n                                return promise.then(function() {\n                                        args[1].apply(null, []);\n                                    },\n                                    function(err) {\n                                        if (args.length >= 3) {\n                                            args[2].apply(null, [err]);\n                                        }\n                                    });\n                            };\n                        });\n                }\n\n                // promise support for createOffer and createAnswer. Available (without\n                // bugs) since M52: crbug/619289\n                if (browserDetails.version < 52) {\n                    ['createOffer', 'createAnswer'].forEach(function(method) {\n                        var nativeMethod = window.RTCPeerConnection.prototype[method];\n                        window.RTCPeerConnection.prototype[method] = function() {\n                            var pc = this;\n                            if (arguments.length < 1 || (arguments.length === 1 &&\n                                    typeof arguments[0] === 'object')) {\n                                var opts = arguments.length === 1 ? arguments[0] : undefined;\n                                return new Promise(function(resolve, reject) {\n                                    nativeMethod.apply(pc, [resolve, reject, opts]);\n                                });\n                            }\n                            return nativeMethod.apply(this, arguments);\n                        };\n                    });\n                }\n\n                // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n                ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n                    .forEach(function(method) {\n                        var nativeMethod = window.RTCPeerConnection.prototype[method];\n                        window.RTCPeerConnection.prototype[method] = function() {\n                            arguments[0] = new ((method === 'addIceCandidate') ?\n                                window.RTCIceCandidate :\n                                window.RTCSessionDescription)(arguments[0]);\n                            return nativeMethod.apply(this, arguments);\n                        };\n                    });\n\n                // support for addIceCandidate(null or undefined)\n                var nativeAddIceCandidate =\n                    window.RTCPeerConnection.prototype.addIceCandidate;\n                window.RTCPeerConnection.prototype.addIceCandidate = function() {\n                    if (!arguments[0]) {\n                        if (arguments[1]) {\n                            arguments[1].apply(null);\n                        }\n                        return Promise.resolve();\n                    }\n                    return nativeAddIceCandidate.apply(this, arguments);\n                };\n            },\n\n            fixNegotiationNeeded: function(window) {\n                utils.wrapPeerConnectionEvent(window, 'negotiationneeded', function(e) {\n                    var pc = e.target;\n                    if (pc.signalingState !== 'stable') {\n                        return;\n                    }\n                    return e;\n                });\n            },\n\n            shimGetDisplayMedia: function(window, getSourceId) {\n                if ('getDisplayMedia' in window.navigator) {\n                    return;\n                }\n                // getSourceId is a function that returns a promise resolving with\n                // the sourceId of the screen/window/tab to be shared.\n                if (typeof getSourceId !== 'function') {\n                    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n                        'a function');\n                    return;\n                }\n                navigator.getDisplayMedia = function(constraints) {\n                    return getSourceId(constraints)\n                        .then(function(sourceId) {\n                            constraints.video = {\n                                mandatory: {\n                                    chromeMediaSource: 'desktop',\n                                    chromeMediaSourceId: sourceId,\n                                    maxFrameRate: constraints.video.frameRate || 3\n                                }\n                            };\n                            return navigator.mediaDevices.getUserMedia(constraints);\n                        });\n                };\n            }\n        };\n\n    },{\"../utils.js\":14,\"./getusermedia\":6}],6:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n        var utils = require('../utils.js');\n        var logging = utils.log;\n\n// Expose public methods.\n        module.exports = function(window) {\n            var browserDetails = utils.detectBrowser(window);\n            var navigator = window && window.navigator;\n\n            var constraintsToChrome_ = function(c) {\n                if (typeof c !== 'object' || c.mandatory || c.optional) {\n                    return c;\n                }\n                var cc = {};\n                Object.keys(c).forEach(function(key) {\n                    if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n                        return;\n                    }\n                    var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n                    if (r.exact !== undefined && typeof r.exact === 'number') {\n                        r.min = r.max = r.exact;\n                    }\n                    var oldname_ = function(prefix, name) {\n                        if (prefix) {\n                            return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n                        }\n                        return (name === 'deviceId') ? 'sourceId' : name;\n                    };\n                    if (r.ideal !== undefined) {\n                        cc.optional = cc.optional || [];\n                        var oc = {};\n                        if (typeof r.ideal === 'number') {\n                            oc[oldname_('min', key)] = r.ideal;\n                            cc.optional.push(oc);\n                            oc = {};\n                            oc[oldname_('max', key)] = r.ideal;\n                            cc.optional.push(oc);\n                        } else {\n                            oc[oldname_('', key)] = r.ideal;\n                            cc.optional.push(oc);\n                        }\n                    }\n                    if (r.exact !== undefined && typeof r.exact !== 'number') {\n                        cc.mandatory = cc.mandatory || {};\n                        cc.mandatory[oldname_('', key)] = r.exact;\n                    } else {\n                        ['min', 'max'].forEach(function(mix) {\n                            if (r[mix] !== undefined) {\n                                cc.mandatory = cc.mandatory || {};\n                                cc.mandatory[oldname_(mix, key)] = r[mix];\n                            }\n                        });\n                    }\n                });\n                if (c.advanced) {\n                    cc.optional = (cc.optional || []).concat(c.advanced);\n                }\n                return cc;\n            };\n\n            var shimConstraints_ = function(constraints, func) {\n                if (browserDetails.version >= 61) {\n                    return func(constraints);\n                }\n                constraints = JSON.parse(JSON.stringify(constraints));\n                if (constraints && typeof constraints.audio === 'object') {\n                    var remap = function(obj, a, b) {\n                        if (a in obj && !(b in obj)) {\n                            obj[b] = obj[a];\n                            delete obj[a];\n                        }\n                    };\n                    constraints = JSON.parse(JSON.stringify(constraints));\n                    remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n                    remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n                    constraints.audio = constraintsToChrome_(constraints.audio);\n                }\n                if (constraints && typeof constraints.video === 'object') {\n                    // Shim facingMode for mobile & surface pro.\n                    var face = constraints.video.facingMode;\n                    face = face && ((typeof face === 'object') ? face : {ideal: face});\n                    var getSupportedFacingModeLies = browserDetails.version < 66;\n\n                    if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                            face.ideal === 'user' || face.ideal === 'environment')) &&\n                        !(navigator.mediaDevices.getSupportedConstraints &&\n                            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n                            !getSupportedFacingModeLies)) {\n                        delete constraints.video.facingMode;\n                        var matches;\n                        if (face.exact === 'environment' || face.ideal === 'environment') {\n                            matches = ['back', 'rear'];\n                        } else if (face.exact === 'user' || face.ideal === 'user') {\n                            matches = ['front'];\n                        }\n                        if (matches) {\n                            // Look for matches in label, or use last cam for back (typical).\n                            return navigator.mediaDevices.enumerateDevices()\n                                .then(function(devices) {\n                                    devices = devices.filter(function(d) {\n                                        return d.kind === 'videoinput';\n                                    });\n                                    var dev = devices.find(function(d) {\n                                        return matches.some(function(match) {\n                                            return d.label.toLowerCase().indexOf(match) !== -1;\n                                        });\n                                    });\n                                    if (!dev && devices.length && matches.indexOf('back') !== -1) {\n                                        dev = devices[devices.length - 1]; // more likely the back cam\n                                    }\n                                    if (dev) {\n                                        constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                            {ideal: dev.deviceId};\n                                    }\n                                    constraints.video = constraintsToChrome_(constraints.video);\n                                    logging('chrome: ' + JSON.stringify(constraints));\n                                    return func(constraints);\n                                });\n                        }\n                    }\n                    constraints.video = constraintsToChrome_(constraints.video);\n                }\n                logging('chrome: ' + JSON.stringify(constraints));\n                return func(constraints);\n            };\n\n            var shimError_ = function(e) {\n                return {\n                    name: {\n                        PermissionDeniedError: 'NotAllowedError',\n                        PermissionDismissedError: 'NotAllowedError',\n                        InvalidStateError: 'NotAllowedError',\n                        DevicesNotFoundError: 'NotFoundError',\n                        ConstraintNotSatisfiedError: 'OverconstrainedError',\n                        TrackStartError: 'NotReadableError',\n                        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n                        MediaDeviceKillSwitchOn: 'NotAllowedError',\n                        TabCaptureError: 'AbortError',\n                        ScreenCaptureError: 'AbortError',\n                        DeviceCaptureError: 'AbortError'\n                    }[e.name] || e.name,\n                    message: e.message,\n                    constraint: e.constraint || e.constraintName,\n                    toString: function() {\n                        return this.name + (this.message && ': ') + this.message;\n                    }\n                };\n            };\n\n            var getUserMedia_ = function(constraints, onSuccess, onError) {\n                shimConstraints_(constraints, function(c) {\n                    navigator.webkitGetUserMedia(c, onSuccess, function(e) {\n                        if (onError) {\n                            onError(shimError_(e));\n                        }\n                    });\n                });\n            };\n\n            navigator.getUserMedia = getUserMedia_;\n\n            // Returns the result of getUserMedia as a Promise.\n            var getUserMediaPromise_ = function(constraints) {\n                return new Promise(function(resolve, reject) {\n                    navigator.getUserMedia(constraints, resolve, reject);\n                });\n            };\n\n            if (!navigator.mediaDevices) {\n                navigator.mediaDevices = {\n                    getUserMedia: getUserMediaPromise_,\n                    enumerateDevices: function() {\n                        return new Promise(function(resolve) {\n                            var kinds = {audio: 'audioinput', video: 'videoinput'};\n                            return window.MediaStreamTrack.getSources(function(devices) {\n                                resolve(devices.map(function(device) {\n                                    return {label: device.label,\n                                        kind: kinds[device.kind],\n                                        deviceId: device.id,\n                                        groupId: ''};\n                                }));\n                            });\n                        });\n                    },\n                    getSupportedConstraints: function() {\n                        return {\n                            deviceId: true, echoCancellation: true, facingMode: true,\n                            frameRate: true, height: true, width: true\n                        };\n                    }\n                };\n            }\n\n            // A shim for getUserMedia method on the mediaDevices object.\n            // TODO(KaptenJansson) remove once implemented in Chrome stable.\n            if (!navigator.mediaDevices.getUserMedia) {\n                navigator.mediaDevices.getUserMedia = function(constraints) {\n                    return getUserMediaPromise_(constraints);\n                };\n            } else {\n                // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n                // function which returns a Promise, it does not accept spec-style\n                // constraints.\n                var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n                bind(navigator.mediaDevices);\n                navigator.mediaDevices.getUserMedia = function(cs) {\n                    return shimConstraints_(cs, function(c) {\n                        return origGetUserMedia(c).then(function(stream) {\n                            if (c.audio && !stream.getAudioTracks().length ||\n                                c.video && !stream.getVideoTracks().length) {\n                                stream.getTracks().forEach(function(track) {\n                                    track.stop();\n                                });\n                                throw new DOMException('', 'NotFoundError');\n                            }\n                            return stream;\n                        }, function(e) {\n                            return Promise.reject(shimError_(e));\n                        });\n                    });\n                };\n            }\n\n            // Dummy devicechange event methods.\n            // TODO(KaptenJansson) remove once implemented in Chrome stable.\n            if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\n                navigator.mediaDevices.addEventListener = function() {\n                    logging('Dummy mediaDevices.addEventListener called.');\n                };\n            }\n            if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\n                navigator.mediaDevices.removeEventListener = function() {\n                    logging('Dummy mediaDevices.removeEventListener called.');\n                };\n            }\n        };\n\n    },{\"../utils.js\":14}],7:[function(require,module,exports){\n        /*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n        var SDPUtils = require('sdp');\n        var utils = require('./utils');\n\n        module.exports = {\n            shimRTCIceCandidate: function(window) {\n                // foundation is arbitrarily chosen as an indicator for full support for\n                // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n                if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n                        window.RTCIceCandidate.prototype)) {\n                    return;\n                }\n\n                var NativeRTCIceCandidate = window.RTCIceCandidate;\n                window.RTCIceCandidate = function(args) {\n                    // Remove the a= which shouldn't be part of the candidate string.\n                    if (typeof args === 'object' && args.candidate &&\n                        args.candidate.indexOf('a=') === 0) {\n                        args = JSON.parse(JSON.stringify(args));\n                        args.candidate = args.candidate.substr(2);\n                    }\n\n                    if (args.candidate && args.candidate.length) {\n                        // Augment the native candidate with the parsed fields.\n                        var nativeCandidate = new NativeRTCIceCandidate(args);\n                        var parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n                        var augmentedCandidate = Object.assign(nativeCandidate,\n                            parsedCandidate);\n\n                        // Add a serializer that does not serialize the extra attributes.\n                        augmentedCandidate.toJSON = function() {\n                            return {\n                                candidate: augmentedCandidate.candidate,\n                                sdpMid: augmentedCandidate.sdpMid,\n                                sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n                                usernameFragment: augmentedCandidate.usernameFragment,\n                            };\n                        };\n                        return augmentedCandidate;\n                    }\n                    return new NativeRTCIceCandidate(args);\n                };\n                window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n                // Hook up the augmented candidate in onicecandidate and\n                // addEventListener('icecandidate', ...)\n                utils.wrapPeerConnectionEvent(window, 'icecandidate', function(e) {\n                    if (e.candidate) {\n                        Object.defineProperty(e, 'candidate', {\n                            value: new window.RTCIceCandidate(e.candidate),\n                            writable: 'false'\n                        });\n                    }\n                    return e;\n                });\n            },\n\n            // shimCreateObjectURL must be called before shimSourceObject to avoid loop.\n\n            shimCreateObjectURL: function(window) {\n                var URL = window && window.URL;\n\n                if (!(typeof window === 'object' && window.HTMLMediaElement &&\n                        'srcObject' in window.HTMLMediaElement.prototype &&\n                        URL.createObjectURL && URL.revokeObjectURL)) {\n                    // Only shim CreateObjectURL using srcObject if srcObject exists.\n                    return undefined;\n                }\n\n                var nativeCreateObjectURL = URL.createObjectURL.bind(URL);\n                var nativeRevokeObjectURL = URL.revokeObjectURL.bind(URL);\n                var streams = new Map(), newId = 0;\n\n                URL.createObjectURL = function(stream) {\n                    if ('getTracks' in stream) {\n                        var url = 'polyblob:' + (++newId);\n                        streams.set(url, stream);\n                        utils.deprecated('URL.createObjectURL(stream)',\n                            'elem.srcObject = stream');\n                        return url;\n                    }\n                    return nativeCreateObjectURL(stream);\n                };\n                URL.revokeObjectURL = function(url) {\n                    nativeRevokeObjectURL(url);\n                    streams.delete(url);\n                };\n\n                var dsc = Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,\n                    'src');\n                Object.defineProperty(window.HTMLMediaElement.prototype, 'src', {\n                    get: function() {\n                        return dsc.get.apply(this);\n                    },\n                    set: function(url) {\n                        this.srcObject = streams.get(url) || null;\n                        return dsc.set.apply(this, [url]);\n                    }\n                });\n\n                var nativeSetAttribute = window.HTMLMediaElement.prototype.setAttribute;\n                window.HTMLMediaElement.prototype.setAttribute = function() {\n                    if (arguments.length === 2 &&\n                        ('' + arguments[0]).toLowerCase() === 'src') {\n                        this.srcObject = streams.get(arguments[1]) || null;\n                    }\n                    return nativeSetAttribute.apply(this, arguments);\n                };\n            },\n\n            shimMaxMessageSize: function(window) {\n                if (window.RTCSctpTransport || !window.RTCPeerConnection) {\n                    return;\n                }\n                var browserDetails = utils.detectBrowser(window);\n\n                if (!('sctp' in window.RTCPeerConnection.prototype)) {\n                    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n                        get: function() {\n                            return typeof this._sctp === 'undefined' ? null : this._sctp;\n                        }\n                    });\n                }\n\n                var sctpInDescription = function(description) {\n                    var sections = SDPUtils.splitSections(description.sdp);\n                    sections.shift();\n                    return sections.some(function(mediaSection) {\n                        var mLine = SDPUtils.parseMLine(mediaSection);\n                        return mLine && mLine.kind === 'application'\n                            && mLine.protocol.indexOf('SCTP') !== -1;\n                    });\n                };\n\n                var getRemoteFirefoxVersion = function(description) {\n                    // TODO: Is there a better solution for detecting Firefox?\n                    var match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n                    if (match === null || match.length < 2) {\n                        return -1;\n                    }\n                    var version = parseInt(match[1], 10);\n                    // Test for NaN (yes, this is ugly)\n                    return version !== version ? -1 : version;\n                };\n\n                var getCanSendMaxMessageSize = function(remoteIsFirefox) {\n                    // Every implementation we know can send at least 64 KiB.\n                    // Note: Although Chrome is technically able to send up to 256 KiB, the\n                    //       data does not reach the other peer reliably.\n                    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n                    var canSendMaxMessageSize = 65536;\n                    if (browserDetails.browser === 'firefox') {\n                        if (browserDetails.version < 57) {\n                            if (remoteIsFirefox === -1) {\n                                // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n                                // fragmentation.\n                                canSendMaxMessageSize = 16384;\n                            } else {\n                                // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n                                // messages. Thus, supporting ~2 GiB when sending.\n                                canSendMaxMessageSize = 2147483637;\n                            }\n                        } else if (browserDetails.version < 60) {\n                            // Currently, all FF >= 57 will reset the remote maximum message size\n                            // to the default value when a data channel is created at a later\n                            // stage. :(\n                            // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n                            canSendMaxMessageSize =\n                                browserDetails.version === 57 ? 65535 : 65536;\n                        } else {\n                            // FF >= 60 supports sending ~2 GiB\n                            canSendMaxMessageSize = 2147483637;\n                        }\n                    }\n                    return canSendMaxMessageSize;\n                };\n\n                var getMaxMessageSize = function(description, remoteIsFirefox) {\n                    // Note: 65536 bytes is the default value from the SDP spec. Also,\n                    //       every implementation we know supports receiving 65536 bytes.\n                    var maxMessageSize = 65536;\n\n                    // FF 57 has a slightly incorrect default remote max message size, so\n                    // we need to adjust it here to avoid a failure when sending.\n                    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n                    if (browserDetails.browser === 'firefox'\n                        && browserDetails.version === 57) {\n                        maxMessageSize = 65535;\n                    }\n\n                    var match = SDPUtils.matchPrefix(description.sdp, 'a=max-message-size:');\n                    if (match.length > 0) {\n                        maxMessageSize = parseInt(match[0].substr(19), 10);\n                    } else if (browserDetails.browser === 'firefox' &&\n                        remoteIsFirefox !== -1) {\n                        // If the maximum message size is not present in the remote SDP and\n                        // both local and remote are Firefox, the remote peer can receive\n                        // ~2 GiB.\n                        maxMessageSize = 2147483637;\n                    }\n                    return maxMessageSize;\n                };\n\n                var origSetRemoteDescription =\n                    window.RTCPeerConnection.prototype.setRemoteDescription;\n                window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n                    var pc = this;\n                    pc._sctp = null;\n\n                    if (sctpInDescription(arguments[0])) {\n                        // Check if the remote is FF.\n                        var isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n                        // Get the maximum message size the local peer is capable of sending\n                        var canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n                        // Get the maximum message size of the remote peer.\n                        var remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n                        // Determine final maximum message size\n                        var maxMessageSize;\n                        if (canSendMMS === 0 && remoteMMS === 0) {\n                            maxMessageSize = Number.POSITIVE_INFINITY;\n                        } else if (canSendMMS === 0 || remoteMMS === 0) {\n                            maxMessageSize = Math.max(canSendMMS, remoteMMS);\n                        } else {\n                            maxMessageSize = Math.min(canSendMMS, remoteMMS);\n                        }\n\n                        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n                        // attribute.\n                        var sctp = {};\n                        Object.defineProperty(sctp, 'maxMessageSize', {\n                            get: function() {\n                                return maxMessageSize;\n                            }\n                        });\n                        pc._sctp = sctp;\n                    }\n\n                    return origSetRemoteDescription.apply(pc, arguments);\n                };\n            },\n\n            shimSendThrowTypeError: function(window) {\n                if (!(window.RTCPeerConnection &&\n                        'createDataChannel' in window.RTCPeerConnection.prototype)) {\n                    return;\n                }\n\n                // Note: Although Firefox >= 57 has a native implementation, the maximum\n                //       message size can be reset for all data channels at a later stage.\n                //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n                function wrapDcSend(dc, pc) {\n                    var origDataChannelSend = dc.send;\n                    dc.send = function() {\n                        var data = arguments[0];\n                        var length = data.length || data.size || data.byteLength;\n                        if (dc.readyState === 'open' &&\n                            pc.sctp && length > pc.sctp.maxMessageSize) {\n                            throw new TypeError('Message too large (can send a maximum of ' +\n                                pc.sctp.maxMessageSize + ' bytes)');\n                        }\n                        return origDataChannelSend.apply(dc, arguments);\n                    };\n                }\n                var origCreateDataChannel =\n                    window.RTCPeerConnection.prototype.createDataChannel;\n                window.RTCPeerConnection.prototype.createDataChannel = function() {\n                    var pc = this;\n                    var dataChannel = origCreateDataChannel.apply(pc, arguments);\n                    wrapDcSend(dataChannel, pc);\n                    return dataChannel;\n                };\n                utils.wrapPeerConnectionEvent(window, 'datachannel', function(e) {\n                    wrapDcSend(e.channel, e.target);\n                    return e;\n                });\n            }\n        };\n\n    },{\"./utils\":14,\"sdp\":2}],8:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n        var utils = require('../utils');\n        var filterIceServers = require('./filtericeservers');\n        var shimRTCPeerConnection = require('rtcpeerconnection-shim');\n\n        module.exports = {\n            shimGetUserMedia: require('./getusermedia'),\n            shimPeerConnection: function(window) {\n                var browserDetails = utils.detectBrowser(window);\n\n                if (window.RTCIceGatherer) {\n                    if (!window.RTCIceCandidate) {\n                        window.RTCIceCandidate = function(args) {\n                            return args;\n                        };\n                    }\n                    if (!window.RTCSessionDescription) {\n                        window.RTCSessionDescription = function(args) {\n                            return args;\n                        };\n                    }\n                    // this adds an additional event listener to MediaStrackTrack that signals\n                    // when a tracks enabled property was changed. Workaround for a bug in\n                    // addStream, see below. No longer required in 15025+\n                    if (browserDetails.version < 15025) {\n                        var origMSTEnabled = Object.getOwnPropertyDescriptor(\n                            window.MediaStreamTrack.prototype, 'enabled');\n                        Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n                            set: function(value) {\n                                origMSTEnabled.set.call(this, value);\n                                var ev = new Event('enabled');\n                                ev.enabled = value;\n                                this.dispatchEvent(ev);\n                            }\n                        });\n                    }\n                }\n\n                // ORTC defines the DTMF sender a bit different.\n                // https://github.com/w3c/ortc/issues/714\n                if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n                    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n                        get: function() {\n                            if (this._dtmf === undefined) {\n                                if (this.track.kind === 'audio') {\n                                    this._dtmf = new window.RTCDtmfSender(this);\n                                } else if (this.track.kind === 'video') {\n                                    this._dtmf = null;\n                                }\n                            }\n                            return this._dtmf;\n                        }\n                    });\n                }\n                // Edge currently only implements the RTCDtmfSender, not the\n                // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n                if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n                    window.RTCDTMFSender = window.RTCDtmfSender;\n                }\n\n                var RTCPeerConnectionShim = shimRTCPeerConnection(window,\n                    browserDetails.version);\n                window.RTCPeerConnection = function(config) {\n                    if (config && config.iceServers) {\n                        config.iceServers = filterIceServers(config.iceServers);\n                    }\n                    return new RTCPeerConnectionShim(config);\n                };\n                window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n            },\n            shimReplaceTrack: function(window) {\n                // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n                if (window.RTCRtpSender &&\n                    !('replaceTrack' in window.RTCRtpSender.prototype)) {\n                    window.RTCRtpSender.prototype.replaceTrack =\n                        window.RTCRtpSender.prototype.setTrack;\n                }\n            }\n        };\n\n    },{\"../utils\":14,\"./filtericeservers\":9,\"./getusermedia\":10,\"rtcpeerconnection-shim\":1}],9:[function(require,module,exports){\n        /*\n *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n        var utils = require('../utils');\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\n        module.exports = function(iceServers, edgeVersion) {\n            var hasTurn = false;\n            iceServers = JSON.parse(JSON.stringify(iceServers));\n            return iceServers.filter(function(server) {\n                if (server && (server.urls || server.url)) {\n                    var urls = server.urls || server.url;\n                    if (server.url && !server.urls) {\n                        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n                    }\n                    var isString = typeof urls === 'string';\n                    if (isString) {\n                        urls = [urls];\n                    }\n                    urls = urls.filter(function(url) {\n                        var validTurn = url.indexOf('turn:') === 0 &&\n                            url.indexOf('transport=udp') !== -1 &&\n                            url.indexOf('turn:[') === -1 &&\n                            !hasTurn;\n\n                        if (validTurn) {\n                            hasTurn = true;\n                            return true;\n                        }\n                        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n                            url.indexOf('?transport=udp') === -1;\n                    });\n\n                    delete server.url;\n                    server.urls = isString ? urls[0] : urls;\n                    return !!urls.length;\n                }\n            });\n        };\n\n    },{\"../utils\":14}],10:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n// Expose public methods.\n        module.exports = function(window) {\n            var navigator = window && window.navigator;\n\n            var shimError_ = function(e) {\n                return {\n                    name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n                    message: e.message,\n                    constraint: e.constraint,\n                    toString: function() {\n                        return this.name;\n                    }\n                };\n            };\n\n            // getUserMedia error shim.\n            var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n            bind(navigator.mediaDevices);\n            navigator.mediaDevices.getUserMedia = function(c) {\n                return origGetUserMedia(c).catch(function(e) {\n                    return Promise.reject(shimError_(e));\n                });\n            };\n        };\n\n    },{}],11:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n        var utils = require('../utils');\n\n        module.exports = {\n            shimGetUserMedia: require('./getusermedia'),\n            shimOnTrack: function(window) {\n                if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n                        window.RTCPeerConnection.prototype)) {\n                    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n                        get: function() {\n                            return this._ontrack;\n                        },\n                        set: function(f) {\n                            if (this._ontrack) {\n                                this.removeEventListener('track', this._ontrack);\n                                this.removeEventListener('addstream', this._ontrackpoly);\n                            }\n                            this.addEventListener('track', this._ontrack = f);\n                            this.addEventListener('addstream', this._ontrackpoly = function(e) {\n                                e.stream.getTracks().forEach(function(track) {\n                                    var event = new Event('track');\n                                    event.track = track;\n                                    event.receiver = {track: track};\n                                    event.transceiver = {receiver: event.receiver};\n                                    event.streams = [e.stream];\n                                    this.dispatchEvent(event);\n                                }.bind(this));\n                            }.bind(this));\n                        }\n                    });\n                }\n                if (typeof window === 'object' && window.RTCTrackEvent &&\n                    ('receiver' in window.RTCTrackEvent.prototype) &&\n                    !('transceiver' in window.RTCTrackEvent.prototype)) {\n                    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n                        get: function() {\n                            return {receiver: this.receiver};\n                        }\n                    });\n                }\n            },\n\n            shimSourceObject: function(window) {\n                // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\n                if (typeof window === 'object') {\n                    if (window.HTMLMediaElement &&\n                        !('srcObject' in window.HTMLMediaElement.prototype)) {\n                        // Shim the srcObject property, once, when HTMLMediaElement is found.\n                        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\n                            get: function() {\n                                return this.mozSrcObject;\n                            },\n                            set: function(stream) {\n                                this.mozSrcObject = stream;\n                            }\n                        });\n                    }\n                }\n            },\n\n            shimPeerConnection: function(window) {\n                var browserDetails = utils.detectBrowser(window);\n\n                if (typeof window !== 'object' || !(window.RTCPeerConnection ||\n                        window.mozRTCPeerConnection)) {\n                    return; // probably media.peerconnection.enabled=false in about:config\n                }\n                // The RTCPeerConnection object.\n                if (!window.RTCPeerConnection) {\n                    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n                        if (browserDetails.version < 38) {\n                            // .urls is not supported in FF < 38.\n                            // create RTCIceServers with a single url.\n                            if (pcConfig && pcConfig.iceServers) {\n                                var newIceServers = [];\n                                for (var i = 0; i < pcConfig.iceServers.length; i++) {\n                                    var server = pcConfig.iceServers[i];\n                                    if (server.hasOwnProperty('urls')) {\n                                        for (var j = 0; j < server.urls.length; j++) {\n                                            var newServer = {\n                                                url: server.urls[j]\n                                            };\n                                            if (server.urls[j].indexOf('turn') === 0) {\n                                                newServer.username = server.username;\n                                                newServer.credential = server.credential;\n                                            }\n                                            newIceServers.push(newServer);\n                                        }\n                                    } else {\n                                        newIceServers.push(pcConfig.iceServers[i]);\n                                    }\n                                }\n                                pcConfig.iceServers = newIceServers;\n                            }\n                        }\n                        return new window.mozRTCPeerConnection(pcConfig, pcConstraints);\n                    };\n                    window.RTCPeerConnection.prototype =\n                        window.mozRTCPeerConnection.prototype;\n\n                    // wrap static methods. Currently just generateCertificate.\n                    if (window.mozRTCPeerConnection.generateCertificate) {\n                        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                            get: function() {\n                                return window.mozRTCPeerConnection.generateCertificate;\n                            }\n                        });\n                    }\n\n                    window.RTCSessionDescription = window.mozRTCSessionDescription;\n                    window.RTCIceCandidate = window.mozRTCIceCandidate;\n                }\n\n                // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n                ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n                    .forEach(function(method) {\n                        var nativeMethod = window.RTCPeerConnection.prototype[method];\n                        window.RTCPeerConnection.prototype[method] = function() {\n                            arguments[0] = new ((method === 'addIceCandidate') ?\n                                window.RTCIceCandidate :\n                                window.RTCSessionDescription)(arguments[0]);\n                            return nativeMethod.apply(this, arguments);\n                        };\n                    });\n\n                // support for addIceCandidate(null or undefined)\n                var nativeAddIceCandidate =\n                    window.RTCPeerConnection.prototype.addIceCandidate;\n                window.RTCPeerConnection.prototype.addIceCandidate = function() {\n                    if (!arguments[0]) {\n                        if (arguments[1]) {\n                            arguments[1].apply(null);\n                        }\n                        return Promise.resolve();\n                    }\n                    return nativeAddIceCandidate.apply(this, arguments);\n                };\n\n                // shim getStats with maplike support\n                var makeMapStats = function(stats) {\n                    var map = new Map();\n                    Object.keys(stats).forEach(function(key) {\n                        map.set(key, stats[key]);\n                        map[key] = stats[key];\n                    });\n                    return map;\n                };\n\n                var modernStatsTypes = {\n                    inboundrtp: 'inbound-rtp',\n                    outboundrtp: 'outbound-rtp',\n                    candidatepair: 'candidate-pair',\n                    localcandidate: 'local-candidate',\n                    remotecandidate: 'remote-candidate'\n                };\n\n                var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n                window.RTCPeerConnection.prototype.getStats = function(\n                    selector,\n                    onSucc,\n                    onErr\n                ) {\n                    return nativeGetStats.apply(this, [selector || null])\n                        .then(function(stats) {\n                            if (browserDetails.version < 48) {\n                                stats = makeMapStats(stats);\n                            }\n                            if (browserDetails.version < 53 && !onSucc) {\n                                // Shim only promise getStats with spec-hyphens in type names\n                                // Leave callback version alone; misc old uses of forEach before Map\n                                try {\n                                    stats.forEach(function(stat) {\n                                        stat.type = modernStatsTypes[stat.type] || stat.type;\n                                    });\n                                } catch (e) {\n                                    if (e.name !== 'TypeError') {\n                                        throw e;\n                                    }\n                                    // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n                                    stats.forEach(function(stat, i) {\n                                        stats.set(i, Object.assign({}, stat, {\n                                            type: modernStatsTypes[stat.type] || stat.type\n                                        }));\n                                    });\n                                }\n                            }\n                            return stats;\n                        })\n                        .then(onSucc, onErr);\n                };\n            },\n\n            shimSenderGetStats: function(window) {\n                if (!(typeof window === 'object' && window.RTCPeerConnection &&\n                        window.RTCRtpSender)) {\n                    return;\n                }\n                if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n                    return;\n                }\n                var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n                if (origGetSenders) {\n                    window.RTCPeerConnection.prototype.getSenders = function() {\n                        var pc = this;\n                        var senders = origGetSenders.apply(pc, []);\n                        senders.forEach(function(sender) {\n                            sender._pc = pc;\n                        });\n                        return senders;\n                    };\n                }\n\n                var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n                if (origAddTrack) {\n                    window.RTCPeerConnection.prototype.addTrack = function() {\n                        var sender = origAddTrack.apply(this, arguments);\n                        sender._pc = this;\n                        return sender;\n                    };\n                }\n                window.RTCRtpSender.prototype.getStats = function() {\n                    return this.track ? this._pc.getStats(this.track) :\n                        Promise.resolve(new Map());\n                };\n            },\n\n            shimReceiverGetStats: function(window) {\n                if (!(typeof window === 'object' && window.RTCPeerConnection &&\n                        window.RTCRtpSender)) {\n                    return;\n                }\n                if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n                    return;\n                }\n                var origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n                if (origGetReceivers) {\n                    window.RTCPeerConnection.prototype.getReceivers = function() {\n                        var pc = this;\n                        var receivers = origGetReceivers.apply(pc, []);\n                        receivers.forEach(function(receiver) {\n                            receiver._pc = pc;\n                        });\n                        return receivers;\n                    };\n                }\n                utils.wrapPeerConnectionEvent(window, 'track', function(e) {\n                    e.receiver._pc = e.srcElement;\n                    return e;\n                });\n                window.RTCRtpReceiver.prototype.getStats = function() {\n                    return this._pc.getStats(this.track);\n                };\n            },\n\n            shimRemoveStream: function(window) {\n                if (!window.RTCPeerConnection ||\n                    'removeStream' in window.RTCPeerConnection.prototype) {\n                    return;\n                }\n                window.RTCPeerConnection.prototype.removeStream = function(stream) {\n                    var pc = this;\n                    utils.deprecated('removeStream', 'removeTrack');\n                    this.getSenders().forEach(function(sender) {\n                        if (sender.track && stream.getTracks().indexOf(sender.track) !== -1) {\n                            pc.removeTrack(sender);\n                        }\n                    });\n                };\n            },\n\n            shimRTCDataChannel: function(window) {\n                // rename DataChannel to RTCDataChannel (native fix in FF60):\n                // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n                if (window.DataChannel && !window.RTCDataChannel) {\n                    window.RTCDataChannel = window.DataChannel;\n                }\n            },\n\n            shimGetDisplayMedia: function(window, preferredMediaSource) {\n                if ('getDisplayMedia' in window.navigator) {\n                    return;\n                }\n                navigator.getDisplayMedia = function(constraints) {\n                    if (!(constraints && constraints.video)) {\n                        var err = new DOMException('getDisplayMedia without video ' +\n                            'constraints is undefined');\n                        err.name = 'NotFoundError';\n                        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n                        err.code = 8;\n                        return Promise.reject(err);\n                    }\n                    if (constraints.video === true) {\n                        constraints.video = {mediaSource: preferredMediaSource};\n                    } else {\n                        constraints.video.mediaSource = preferredMediaSource;\n                    }\n                    return navigator.mediaDevices.getUserMedia(constraints);\n                };\n            }\n        };\n\n    },{\"../utils\":14,\"./getusermedia\":12}],12:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n        var utils = require('../utils');\n        var logging = utils.log;\n\n// Expose public methods.\n        module.exports = function(window) {\n            var browserDetails = utils.detectBrowser(window);\n            var navigator = window && window.navigator;\n            var MediaStreamTrack = window && window.MediaStreamTrack;\n\n            var shimError_ = function(e) {\n                return {\n                    name: {\n                        InternalError: 'NotReadableError',\n                        NotSupportedError: 'TypeError',\n                        PermissionDeniedError: 'NotAllowedError',\n                        SecurityError: 'NotAllowedError'\n                    }[e.name] || e.name,\n                    message: {\n                        'The operation is insecure.': 'The request is not allowed by the ' +\n                        'user agent or the platform in the current context.'\n                    }[e.message] || e.message,\n                    constraint: e.constraint,\n                    toString: function() {\n                        return this.name + (this.message && ': ') + this.message;\n                    }\n                };\n            };\n\n            // getUserMedia constraints shim.\n            var getUserMedia_ = function(constraints, onSuccess, onError) {\n                var constraintsToFF37_ = function(c) {\n                    if (typeof c !== 'object' || c.require) {\n                        return c;\n                    }\n                    var require = [];\n                    Object.keys(c).forEach(function(key) {\n                        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n                            return;\n                        }\n                        var r = c[key] = (typeof c[key] === 'object') ?\n                            c[key] : {ideal: c[key]};\n                        if (r.min !== undefined ||\n                            r.max !== undefined || r.exact !== undefined) {\n                            require.push(key);\n                        }\n                        if (r.exact !== undefined) {\n                            if (typeof r.exact === 'number') {\n                                r. min = r.max = r.exact;\n                            } else {\n                                c[key] = r.exact;\n                            }\n                            delete r.exact;\n                        }\n                        if (r.ideal !== undefined) {\n                            c.advanced = c.advanced || [];\n                            var oc = {};\n                            if (typeof r.ideal === 'number') {\n                                oc[key] = {min: r.ideal, max: r.ideal};\n                            } else {\n                                oc[key] = r.ideal;\n                            }\n                            c.advanced.push(oc);\n                            delete r.ideal;\n                            if (!Object.keys(r).length) {\n                                delete c[key];\n                            }\n                        }\n                    });\n                    if (require.length) {\n                        c.require = require;\n                    }\n                    return c;\n                };\n                constraints = JSON.parse(JSON.stringify(constraints));\n                if (browserDetails.version < 38) {\n                    logging('spec: ' + JSON.stringify(constraints));\n                    if (constraints.audio) {\n                        constraints.audio = constraintsToFF37_(constraints.audio);\n                    }\n                    if (constraints.video) {\n                        constraints.video = constraintsToFF37_(constraints.video);\n                    }\n                    logging('ff37: ' + JSON.stringify(constraints));\n                }\n                return navigator.mozGetUserMedia(constraints, onSuccess, function(e) {\n                    onError(shimError_(e));\n                });\n            };\n\n            // Returns the result of getUserMedia as a Promise.\n            var getUserMediaPromise_ = function(constraints) {\n                return new Promise(function(resolve, reject) {\n                    getUserMedia_(constraints, resolve, reject);\n                });\n            };\n\n            // Shim for mediaDevices on older versions.\n            if (!navigator.mediaDevices) {\n                navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\n                    addEventListener: function() { },\n                    removeEventListener: function() { }\n                };\n            }\n            navigator.mediaDevices.enumerateDevices =\n                navigator.mediaDevices.enumerateDevices || function() {\n                    return new Promise(function(resolve) {\n                        var infos = [\n                            {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\n                            {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\n                        ];\n                        resolve(infos);\n                    });\n                };\n\n            if (browserDetails.version < 41) {\n                // Work around http://bugzil.la/1169665\n                var orgEnumerateDevices =\n                    navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\n                navigator.mediaDevices.enumerateDevices = function() {\n                    return orgEnumerateDevices().then(undefined, function(e) {\n                        if (e.name === 'NotFoundError') {\n                            return [];\n                        }\n                        throw e;\n                    });\n                };\n            }\n            if (browserDetails.version < 49) {\n                var origGetUserMedia = navigator.mediaDevices.getUserMedia.\n                bind(navigator.mediaDevices);\n                navigator.mediaDevices.getUserMedia = function(c) {\n                    return origGetUserMedia(c).then(function(stream) {\n                        // Work around https://bugzil.la/802326\n                        if (c.audio && !stream.getAudioTracks().length ||\n                            c.video && !stream.getVideoTracks().length) {\n                            stream.getTracks().forEach(function(track) {\n                                track.stop();\n                            });\n                            throw new DOMException('The object can not be found here.',\n                                'NotFoundError');\n                        }\n                        return stream;\n                    }, function(e) {\n                        return Promise.reject(shimError_(e));\n                    });\n                };\n            }\n            if (!(browserDetails.version > 55 &&\n                    'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n                var remap = function(obj, a, b) {\n                    if (a in obj && !(b in obj)) {\n                        obj[b] = obj[a];\n                        delete obj[a];\n                    }\n                };\n\n                var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n                bind(navigator.mediaDevices);\n                navigator.mediaDevices.getUserMedia = function(c) {\n                    if (typeof c === 'object' && typeof c.audio === 'object') {\n                        c = JSON.parse(JSON.stringify(c));\n                        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n                        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n                    }\n                    return nativeGetUserMedia(c);\n                };\n\n                if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n                    var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n                    MediaStreamTrack.prototype.getSettings = function() {\n                        var obj = nativeGetSettings.apply(this, arguments);\n                        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n                        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n                        return obj;\n                    };\n                }\n\n                if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n                    var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\n                    MediaStreamTrack.prototype.applyConstraints = function(c) {\n                        if (this.kind === 'audio' && typeof c === 'object') {\n                            c = JSON.parse(JSON.stringify(c));\n                            remap(c, 'autoGainControl', 'mozAutoGainControl');\n                            remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n                        }\n                        return nativeApplyConstraints.apply(this, [c]);\n                    };\n                }\n            }\n            navigator.getUserMedia = function(constraints, onSuccess, onError) {\n                if (browserDetails.version < 44) {\n                    return getUserMedia_(constraints, onSuccess, onError);\n                }\n                // Replace Firefox 44+'s deprecation warning with unprefixed version.\n                utils.deprecated('navigator.getUserMedia',\n                    'navigator.mediaDevices.getUserMedia');\n                navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n            };\n        };\n\n    },{\"../utils\":14}],13:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        'use strict';\n        var utils = require('../utils');\n\n        module.exports = {\n            shimLocalStreamsAPI: function(window) {\n                if (typeof window !== 'object' || !window.RTCPeerConnection) {\n                    return;\n                }\n                if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n                    window.RTCPeerConnection.prototype.getLocalStreams = function() {\n                        if (!this._localStreams) {\n                            this._localStreams = [];\n                        }\n                        return this._localStreams;\n                    };\n                }\n                if (!('getStreamById' in window.RTCPeerConnection.prototype)) {\n                    window.RTCPeerConnection.prototype.getStreamById = function(id) {\n                        var result = null;\n                        if (this._localStreams) {\n                            this._localStreams.forEach(function(stream) {\n                                if (stream.id === id) {\n                                    result = stream;\n                                }\n                            });\n                        }\n                        if (this._remoteStreams) {\n                            this._remoteStreams.forEach(function(stream) {\n                                if (stream.id === id) {\n                                    result = stream;\n                                }\n                            });\n                        }\n                        return result;\n                    };\n                }\n                if (!('addStream' in window.RTCPeerConnection.prototype)) {\n                    var _addTrack = window.RTCPeerConnection.prototype.addTrack;\n                    window.RTCPeerConnection.prototype.addStream = function(stream) {\n                        if (!this._localStreams) {\n                            this._localStreams = [];\n                        }\n                        if (this._localStreams.indexOf(stream) === -1) {\n                            this._localStreams.push(stream);\n                        }\n                        var pc = this;\n                        stream.getTracks().forEach(function(track) {\n                            _addTrack.call(pc, track, stream);\n                        });\n                    };\n\n                    window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n                        if (stream) {\n                            if (!this._localStreams) {\n                                this._localStreams = [stream];\n                            } else if (this._localStreams.indexOf(stream) === -1) {\n                                this._localStreams.push(stream);\n                            }\n                        }\n                        return _addTrack.call(this, track, stream);\n                    };\n                }\n                if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n                    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n                        if (!this._localStreams) {\n                            this._localStreams = [];\n                        }\n                        var index = this._localStreams.indexOf(stream);\n                        if (index === -1) {\n                            return;\n                        }\n                        this._localStreams.splice(index, 1);\n                        var pc = this;\n                        var tracks = stream.getTracks();\n                        this.getSenders().forEach(function(sender) {\n                            if (tracks.indexOf(sender.track) !== -1) {\n                                pc.removeTrack(sender);\n                            }\n                        });\n                    };\n                }\n            },\n            shimRemoteStreamsAPI: function(window) {\n                if (typeof window !== 'object' || !window.RTCPeerConnection) {\n                    return;\n                }\n                if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n                    window.RTCPeerConnection.prototype.getRemoteStreams = function() {\n                        return this._remoteStreams ? this._remoteStreams : [];\n                    };\n                }\n                if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n                    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n                        get: function() {\n                            return this._onaddstream;\n                        },\n                        set: function(f) {\n                            var pc = this;\n                            if (this._onaddstream) {\n                                this.removeEventListener('addstream', this._onaddstream);\n                                this.removeEventListener('track', this._onaddstreampoly);\n                            }\n                            this.addEventListener('addstream', this._onaddstream = f);\n                            this.addEventListener('track', this._onaddstreampoly = function(e) {\n                                e.streams.forEach(function(stream) {\n                                    if (!pc._remoteStreams) {\n                                        pc._remoteStreams = [];\n                                    }\n                                    if (pc._remoteStreams.indexOf(stream) >= 0) {\n                                        return;\n                                    }\n                                    pc._remoteStreams.push(stream);\n                                    var event = new Event('addstream');\n                                    event.stream = stream;\n                                    pc.dispatchEvent(event);\n                                });\n                            });\n                        }\n                    });\n                }\n            },\n            shimCallbacksAPI: function(window) {\n                if (typeof window !== 'object' || !window.RTCPeerConnection) {\n                    return;\n                }\n                var prototype = window.RTCPeerConnection.prototype;\n                var createOffer = prototype.createOffer;\n                var createAnswer = prototype.createAnswer;\n                var setLocalDescription = prototype.setLocalDescription;\n                var setRemoteDescription = prototype.setRemoteDescription;\n                var addIceCandidate = prototype.addIceCandidate;\n\n                prototype.createOffer = function(successCallback, failureCallback) {\n                    var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n                    var promise = createOffer.apply(this, [options]);\n                    if (!failureCallback) {\n                        return promise;\n                    }\n                    promise.then(successCallback, failureCallback);\n                    return Promise.resolve();\n                };\n\n                prototype.createAnswer = function(successCallback, failureCallback) {\n                    var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n                    var promise = createAnswer.apply(this, [options]);\n                    if (!failureCallback) {\n                        return promise;\n                    }\n                    promise.then(successCallback, failureCallback);\n                    return Promise.resolve();\n                };\n\n                var withCallback = function(description, successCallback, failureCallback) {\n                    var promise = setLocalDescription.apply(this, [description]);\n                    if (!failureCallback) {\n                        return promise;\n                    }\n                    promise.then(successCallback, failureCallback);\n                    return Promise.resolve();\n                };\n                prototype.setLocalDescription = withCallback;\n\n                withCallback = function(description, successCallback, failureCallback) {\n                    var promise = setRemoteDescription.apply(this, [description]);\n                    if (!failureCallback) {\n                        return promise;\n                    }\n                    promise.then(successCallback, failureCallback);\n                    return Promise.resolve();\n                };\n                prototype.setRemoteDescription = withCallback;\n\n                withCallback = function(candidate, successCallback, failureCallback) {\n                    var promise = addIceCandidate.apply(this, [candidate]);\n                    if (!failureCallback) {\n                        return promise;\n                    }\n                    promise.then(successCallback, failureCallback);\n                    return Promise.resolve();\n                };\n                prototype.addIceCandidate = withCallback;\n            },\n            shimGetUserMedia: function(window) {\n                var navigator = window && window.navigator;\n\n                if (!navigator.getUserMedia) {\n                    if (navigator.webkitGetUserMedia) {\n                        navigator.getUserMedia = navigator.webkitGetUserMedia.bind(navigator);\n                    } else if (navigator.mediaDevices &&\n                        navigator.mediaDevices.getUserMedia) {\n                        navigator.getUserMedia = function(constraints, cb, errcb) {\n                            navigator.mediaDevices.getUserMedia(constraints)\n                                .then(cb, errcb);\n                        }.bind(navigator);\n                    }\n                }\n            },\n            shimRTCIceServerUrls: function(window) {\n                // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n                var OrigPeerConnection = window.RTCPeerConnection;\n                window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n                    if (pcConfig && pcConfig.iceServers) {\n                        var newIceServers = [];\n                        for (var i = 0; i < pcConfig.iceServers.length; i++) {\n                            var server = pcConfig.iceServers[i];\n                            if (!server.hasOwnProperty('urls') &&\n                                server.hasOwnProperty('url')) {\n                                utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n                                server = JSON.parse(JSON.stringify(server));\n                                server.urls = server.url;\n                                delete server.url;\n                                newIceServers.push(server);\n                            } else {\n                                newIceServers.push(pcConfig.iceServers[i]);\n                            }\n                        }\n                        pcConfig.iceServers = newIceServers;\n                    }\n                    return new OrigPeerConnection(pcConfig, pcConstraints);\n                };\n                window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n                // wrap static methods. Currently just generateCertificate.\n                if ('generateCertificate' in window.RTCPeerConnection) {\n                    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n                        get: function() {\n                            return OrigPeerConnection.generateCertificate;\n                        }\n                    });\n                }\n            },\n            shimTrackEventTransceiver: function(window) {\n                // Add event.transceiver member over deprecated event.receiver\n                if (typeof window === 'object' && window.RTCPeerConnection &&\n                    ('receiver' in window.RTCTrackEvent.prototype) &&\n                    // can't check 'transceiver' in window.RTCTrackEvent.prototype, as it is\n                    // defined for some reason even when window.RTCTransceiver is not.\n                    !window.RTCTransceiver) {\n                    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n                        get: function() {\n                            return {receiver: this.receiver};\n                        }\n                    });\n                }\n            },\n\n            shimCreateOfferLegacy: function(window) {\n                var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n                window.RTCPeerConnection.prototype.createOffer = function(offerOptions) {\n                    var pc = this;\n                    if (offerOptions) {\n                        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n                            // support bit values\n                            offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n                        }\n                        var audioTransceiver = pc.getTransceivers().find(function(transceiver) {\n                            return transceiver.sender.track &&\n                                transceiver.sender.track.kind === 'audio';\n                        });\n                        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n                            if (audioTransceiver.direction === 'sendrecv') {\n                                if (audioTransceiver.setDirection) {\n                                    audioTransceiver.setDirection('sendonly');\n                                } else {\n                                    audioTransceiver.direction = 'sendonly';\n                                }\n                            } else if (audioTransceiver.direction === 'recvonly') {\n                                if (audioTransceiver.setDirection) {\n                                    audioTransceiver.setDirection('inactive');\n                                } else {\n                                    audioTransceiver.direction = 'inactive';\n                                }\n                            }\n                        } else if (offerOptions.offerToReceiveAudio === true &&\n                            !audioTransceiver) {\n                            pc.addTransceiver('audio');\n                        }\n\n\n                        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n                            // support bit values\n                            offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n                        }\n                        var videoTransceiver = pc.getTransceivers().find(function(transceiver) {\n                            return transceiver.sender.track &&\n                                transceiver.sender.track.kind === 'video';\n                        });\n                        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n                            if (videoTransceiver.direction === 'sendrecv') {\n                                videoTransceiver.setDirection('sendonly');\n                            } else if (videoTransceiver.direction === 'recvonly') {\n                                videoTransceiver.setDirection('inactive');\n                            }\n                        } else if (offerOptions.offerToReceiveVideo === true &&\n                            !videoTransceiver) {\n                            pc.addTransceiver('video');\n                        }\n                    }\n                    return origCreateOffer.apply(pc, arguments);\n                };\n            }\n        };\n\n    },{\"../utils\":14}],14:[function(require,module,exports){\n        /*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n        /* eslint-env node */\n        'use strict';\n\n        var logDisabled_ = true;\n        var deprecationWarnings_ = true;\n\n        /**\n         * Extract browser version out of the provided user agent string.\n         *\n         * @param {!string} uastring userAgent string.\n         * @param {!string} expr Regular expression used as match criteria.\n         * @param {!number} pos position in the version string to be returned.\n         * @return {!number} browser version.\n         */\n        function extractVersion(uastring, expr, pos) {\n            var match = uastring.match(expr);\n            return match && match.length >= pos && parseInt(match[pos], 10);\n        }\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\n        function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n            if (!window.RTCPeerConnection) {\n                return;\n            }\n            var proto = window.RTCPeerConnection.prototype;\n            var nativeAddEventListener = proto.addEventListener;\n            proto.addEventListener = function(nativeEventName, cb) {\n                if (nativeEventName !== eventNameToWrap) {\n                    return nativeAddEventListener.apply(this, arguments);\n                }\n                var wrappedCallback = function(e) {\n                    var modifiedEvent = wrapper(e);\n                    if (modifiedEvent) {\n                        cb(modifiedEvent);\n                    }\n                };\n                this._eventMap = this._eventMap || {};\n                this._eventMap[cb] = wrappedCallback;\n                return nativeAddEventListener.apply(this, [nativeEventName,\n                    wrappedCallback]);\n            };\n\n            var nativeRemoveEventListener = proto.removeEventListener;\n            proto.removeEventListener = function(nativeEventName, cb) {\n                if (nativeEventName !== eventNameToWrap || !this._eventMap\n                    || !this._eventMap[cb]) {\n                    return nativeRemoveEventListener.apply(this, arguments);\n                }\n                var unwrappedCb = this._eventMap[cb];\n                delete this._eventMap[cb];\n                return nativeRemoveEventListener.apply(this, [nativeEventName,\n                    unwrappedCb]);\n            };\n\n            Object.defineProperty(proto, 'on' + eventNameToWrap, {\n                get: function() {\n                    return this['_on' + eventNameToWrap];\n                },\n                set: function(cb) {\n                    if (this['_on' + eventNameToWrap]) {\n                        this.removeEventListener(eventNameToWrap,\n                            this['_on' + eventNameToWrap]);\n                        delete this['_on' + eventNameToWrap];\n                    }\n                    if (cb) {\n                        this.addEventListener(eventNameToWrap,\n                            this['_on' + eventNameToWrap] = cb);\n                    }\n                },\n                enumerable: true,\n                configurable: true\n            });\n        }\n\n// Utility methods.\n        module.exports = {\n            extractVersion: extractVersion,\n            wrapPeerConnectionEvent: wrapPeerConnectionEvent,\n            disableLog: function(bool) {\n                if (typeof bool !== 'boolean') {\n                    return new Error('Argument type: ' + typeof bool +\n                        '. Please use a boolean.');\n                }\n                logDisabled_ = bool;\n                return (bool) ? 'adapter.js logging disabled' :\n                    'adapter.js logging enabled';\n            },\n\n            /**\n             * Disable or enable deprecation warnings\n             * @param {!boolean} bool set to true to disable warnings.\n             */\n            disableWarnings: function(bool) {\n                if (typeof bool !== 'boolean') {\n                    return new Error('Argument type: ' + typeof bool +\n                        '. Please use a boolean.');\n                }\n                deprecationWarnings_ = !bool;\n                return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n            },\n\n            log: function() {\n                if (typeof window === 'object') {\n                    if (logDisabled_) {\n                        return;\n                    }\n                    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n                        console.log.apply(console, arguments);\n                    }\n                }\n            },\n\n            /**\n             * Shows a deprecation warning suggesting the modern and spec-compatible API.\n             */\n            deprecated: function(oldMethod, newMethod) {\n                if (!deprecationWarnings_) {\n                    return;\n                }\n                console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n                    ' instead.');\n            },\n\n            /**\n             * Browser detector.\n             *\n             * @return {object} result containing browser and version\n             *     properties.\n             */\n            detectBrowser: function(window) {\n                var navigator = window && window.navigator;\n\n                // Returned result object.\n                var result = {};\n                result.browser = null;\n                result.version = null;\n\n                // Fail early if it's not a browser\n                if (typeof window === 'undefined' || !window.navigator) {\n                    result.browser = 'Not a browser.';\n                    return result;\n                }\n\n                if (navigator.mozGetUserMedia) { // Firefox.\n                    result.browser = 'firefox';\n                    result.version = extractVersion(navigator.userAgent,\n                        /Firefox\\/(\\d+)\\./, 1);\n                } else if (navigator.webkitGetUserMedia) {\n                    // Chrome, Chromium, Webview, Opera.\n                    // Version matches Chrome/WebRTC version.\n                    result.browser = 'chrome';\n                    result.version = extractVersion(navigator.userAgent,\n                        /Chrom(e|ium)\\/(\\d+)\\./, 2);\n                } else if (navigator.mediaDevices &&\n                    navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n                    result.browser = 'edge';\n                    result.version = extractVersion(navigator.userAgent,\n                        /Edge\\/(\\d+).(\\d+)$/, 2);\n                } else if (window.RTCPeerConnection &&\n                    navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n                    result.browser = 'safari';\n                    result.version = extractVersion(navigator.userAgent,\n                        /AppleWebKit\\/(\\d+)\\./, 1);\n                } else { // Default fallthrough: not supported.\n                    result.browser = 'Not a supported browser.';\n                    return result;\n                }\n\n                return result;\n            }\n        };\n\n    },{}]},{},[3])(3)\n});","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!./index.scss?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!./index.scss?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}